import{a6 as S,r as y,x as V,i as B,c as n,b as e,a as o,f as k,F as d,d as m,u as w,P as C,o as s,t as c,v,w as g,H as P,e as x,a8 as E}from"./app.a0bb8a56.js";import{_ as L}from"./SearchIndex.f2ab63d8.js";import{_ as F}from"./NoteStatusBadge.df529a34.js";import{_ as A,I as T,a as H}from"./IconDoubleDown.f7fdae50.js";import{u as M}from"./useConfirmForm.cc8629aa.js";import{_ as z}from"./PaginationNav.aa2ac306.js";import G from"./ConfirmFormComposable.4a7adc82.js";import"./pickBy.7ddaa899.js";import"./throttle.1e2c321a.js";import"./FormInput.4007528d.js";import"./SpinnerButton.bb203049.js";import"./ModalDialog.0c0dc9ef.js";const J={class:"flex flex-col-reverse md:flex-row justify-between items-center mb-4"},K={class:"bg-white rounded shadow overflow-x-auto hidden md:block"},Q={class:"w-full whitespace-nowrap"},U={class:"text-left font-semibold text-complement"},W=["textContent","colspan"],X={key:0,class:"px-6 py-4 border-t"},Y=["textContent"],Z={class:"border-t"},R={class:"flex justify-between items-center"},tt={class:"md:hidden"},et={class:"flex justify-between items-center my-2 px-2"},st={class:"bg-primary-darker p-2 rounded-full"},nt={class:"my-2 p-2 bg-gray-100 rounded space-y-2"},ot={class:"flex items-center justify-between"},at={class:"font-semibold text-complement text-xs flex items-center"},rt={class:"block py-2 px-1 italic truncate"},it={class:"flex items-center justify-between text-xs"},ct=["textContent"],lt=["textContent"],dt=["textContent"],vt={__name:"CaseIndex",props:{caseRecords:{type:Object,required:!0},configs:{type:Object,required:!0},filters:{type:Object,required:!0},routes:{type:Object,required:!0},can:{type:Object,required:!0}},setup(a){const u=a,j=S(()=>E(()=>import("./CreateForm.16ca6ae6.js"),["assets/CreateForm.16ca6ae6.js","assets/app.a0bb8a56.js","assets/app.5b38193d.css","assets/ModalDialog.0c0dc9ef.js","assets/ModalDialog.7d4de9ea.css","assets/FormInput.4007528d.js","assets/SpinnerButton.bb203049.js","assets/FormRadio.10f5c06b.js"])),O=y(null),f=V({search:u.filters.search,scope:u.filters.scope}),b=y(null);function $(i){C(i).post(u.routes.store)}let l=null;const p=i=>{switch(l={...i},l.name){case"destroy-case":case"cancel-case":q(l.config);break}},N=i=>{switch(l.name){case"destroy-case":case"cancel-case":C({reason:i}).delete(l.route,{onFinish:()=>l=null});break}},{confirmForm:I,openConfirmForm:q,confirmed:D}=M();return B(()=>b.value.focus()),(i,r)=>(s(),n(d,null,[e("div",J,[o(L,{scopes:a.configs.scopes,form:f,onSearchChanged:r[0]||(r[0]=t=>f.search=t),onScopeChanged:r[1]||(r[1]=t=>f.scope=t),ref_key:"searchInput",ref:b},null,8,["scopes","form"]),a.can.create?(s(),n("button",{key:0,class:"btn btn-accent w-full mb-4 md:w-auto md:px-4 md:mb-0",onClick:r[2]||(r[2]=t=>i.$refs.createFormRef.open())}," New Case ")):k("",!0)]),e("div",K,[e("table",Q,[e("tr",U,[(s(),n(d,null,m(["AN","Patient","Reason","Admitted On","Status","Author"],t=>e("th",{class:"px-6 pt-6 pb-4",key:t,textContent:c(t),colspan:t==="Author"?2:1},null,8,W)),64))]),(s(!0),n(d,null,m(a.caseRecords.data,(t,_)=>(s(),n("tr",{class:"focus-within:bg-primary-darker",key:_},[(s(),n(d,null,m(["an","patient","reason","admitted_at","status","author"],h=>(s(),n(d,{key:h},[h==="status"?(s(),n("td",X,[o(F,{status:t.status},null,8,["status"])])):(s(),n("td",{key:1,class:"px-6 py-4 border-t",textContent:c(t[h])},null,8,Y))],64))),64)),e("td",Z,[e("div",R,[o(A,{actions:t.actions,onActionClicked:p},null,8,["actions"])])])]))),128))])]),e("div",tt,[(s(!0),n(d,null,m(a.caseRecords.data,(t,_)=>(s(),n("div",{class:"bg-white rounded shadow my-4 p-4",key:_},[e("div",et,[e("div",null,c(t.patient),1),t.actions.length>1?(s(),v(P,{key:0},{default:g(()=>[e("div",st,[o(T,{class:"w-4 h-4 text-accent"})])]),dropdown:g(()=>[o(H,{actions:t.actions,onActionClicked:p},null,8,["actions"])]),_:2},1024)):t.actions.length===1?(s(),v(A,{key:1,actions:t.actions,onActionClicked:p},null,8,["actions"])):k("",!0)]),e("div",nt,[e("div",ot,[o(F,{status:t.status},null,8,["status"]),e("p",at,[e("span",rt,c(t.author),1)])]),e("div",it,[e("p",null,[x(" AN : "),e("span",{class:"text-complement font-semibold",textContent:c(t.an)},null,8,ct)]),e("p",null,[x(" Reason: "),e("span",{class:"text-complement font-semibold px-1",textContent:c(t.reason)},null,8,lt)]),e("p",null,[x(" On : "),e("span",{class:"text-complement font-semibold",textContent:c(t.admitted_at)},null,8,dt)])])])]))),128))]),o(z,{links:a.caseRecords.links},null,8,["links"]),o(w(j),{"service-endpoint":a.routes.admissionsShow,"admit-reasons":a.configs.admit_reasons,ref_key:"createFormRef",ref:O,onConfirmed:$},null,8,["service-endpoint","admit-reasons"]),o(G,{ref_key:"confirmForm",ref:I,onConfirmed:r[3]||(r[3]=t=>w(D)(t,N))},null,512)],64))}};export{vt as default};
