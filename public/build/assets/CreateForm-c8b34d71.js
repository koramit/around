import{r as f,l as _,b as l,k as T,e as i,f as d,d as t,w as B,g,c as r,s as E,F as v,m as w,t as y,q as N,h as S,D as $,n as D}from"./app-9d10baca.js";import{M as F}from"./ModalDialog-94d841ad.js";import{_ as K}from"./FormInput-3cc59eed.js";import{_ as R}from"./SpinnerButton-3052121e.js";import{_ as q}from"./FormRadio-b92da973.js";const I=t("div",{class:"font-semibold text-complement"}," Search Admission ",-1),M={class:"py-4 my-2 md:py-6 md:my-4 border-t border-b border-accent-darker"},U=t("hr",{class:"my-4 md:my-6"},null,-1),z=t("span",{class:"form-label block"},"admission data",-1),H={class:"bg-gray-100 text-gray-100 whitespace-nowrap"},L={key:1,class:"bg-white rounded shadow p-2 lg:p-4 text-sm"},G={class:"text-complement uppercase font-semibold"},J={key:0},P=t("hr",{class:"my-4 md:my-6"},null,-1),Q={class:"flex justify-end items-center"},W=["disabled"],ae={__name:"CreateForm",props:{serviceEndpoint:{type:String,required:!0},admitReasons:{type:Array,default:()=>["KT","Complication"]}},emits:["confirmed"],setup(h,{expose:x,emit:C}){const V=h,j=C,c=f(null),b=f(null),m=f(!1),a=_({an:null,hn:null,reason_for_admission:null}),e=_({an:null,hn:null,name:null,gender:null,age:null,ward_admit:null,admitted_at:null,discharged_at:null}),u=_({an:null});function k(){m.value=!0,u.an=null,Object.keys(e).map(n=>e[n]=null),window.axios.post(V.serviceEndpoint,{key:a.an}).then(n=>{if(!n.data.found){u.an=n.data.message;return}Object.keys(e).map(o=>e[o]=n.data[o])}).catch(n=>{console.log(n)}).finally(()=>{m.value=!1})}function O(){c.value.open(),Object.keys(e).map(n=>e[n]=null),D(()=>b.value.focus())}function A(){a.an=e.an,a.hn=e.hn,j("confirmed",{...a}),c.value.close()}return x({open:O}),(n,o)=>(l(),T($,{to:"body"},[i(F,{ref_key:"modal",ref:c,"width-mode":"form-cols-1",onClosed:o[2]||(o[2]=p=>Object.keys(a).map(s=>a[s]=null))},{header:d(()=>[I]),body:d(()=>{var p;return[t("div",M,[i(K,{label:"an",name:"an",modelValue:a.an,"onUpdate:modelValue":o[0]||(o[0]=s=>a.an=s),type:"tel",error:u.an,ref_key:"anInput",ref:b,onKeydown:B(k,["enter"])},null,8,["modelValue","error"]),i(R,{spin:m.value,class:"btn-complement w-full mt-2",onClick:k,disabled:!((p=a.an)!=null&&p.length)},{default:d(()=>[g(" SEARCH ")]),_:1},8,["spin","disabled"]),U,z,e.hn?(l(),r("div",L,[(l(!0),r(v,null,w([...Object.keys(e)].filter(s=>e[s]),s=>(l(),r("p",{class:"mt-1 whitespace-nowrap",key:s},[t("span",G,y(s.replaceAll("_"," "))+" : ",1),g(" "+y(e[s]),1)]))),128))])):(l(),r("div",{key:0,class:E(["bg-white rounded shadow p-2 lg:p-4 text-sm",{"animate-pulse":m.value}])},[(l(!0),r(v,null,w(Object.keys(e),s=>(l(),r("div",{class:"mt-1",key:s},[t("span",H,y(s)+" placeholder ",1)]))),128))],2)),i(N,{name:"slide-fade"},{default:d(()=>[e.hn?(l(),r("div",J,[P,i(q,{label:"reason for admission",modelValue:a.reason_for_admission,"onUpdate:modelValue":o[1]||(o[1]=s=>a.reason_for_admission=s),name:"reason_for_admission",options:h.admitReasons},null,8,["modelValue","options"])])):S("",!0)]),_:1})])]}),footer:d(()=>[t("div",Q,[t("button",{class:"btn btn-accent",onClick:A,disabled:!e.an||!a.reason_for_admission}," Confirm ",8,W)])]),_:1},512)]))}};export{ae as default};
