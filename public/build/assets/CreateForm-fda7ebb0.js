import{r as f,l as _,h as l,k as T,d as i,e as d,b as t,w as A,f as g,c as r,q as B,F as v,m as w,t as y,T as E,g as K,D as N,n as S}from"./app-1c4fa40b.js";import{M as $}from"./ModalDialog-0d7bf837.js";import{_ as D}from"./FormInput-94d57d5c.js";import{_ as F}from"./SpinnerButton-0a4d38f1.js";import{_ as R}from"./FormRadio-4130ecc4.js";const q=t("div",{class:"font-semibold text-complement"}," Search Admission ",-1),I={class:"py-4 my-2 md:py-6 md:my-4 border-t border-b border-accent-darker"},M=t("hr",{class:"my-4 md:my-6"},null,-1),U=t("span",{class:"form-label block"},"admission data",-1),z={class:"bg-gray-100 text-gray-100 whitespace-nowrap"},H={key:1,class:"bg-white rounded shadow p-2 lg:p-4 text-sm"},L={class:"text-complement uppercase font-semibold"},G={key:0},J=t("hr",{class:"my-4 md:my-6"},null,-1),P={class:"flex justify-end items-center"},Q=["disabled"],ae={__name:"CreateForm",props:{serviceEndpoint:{type:String,required:!0},admitReasons:{type:Array,default:()=>["KT","Complication"]}},emits:["confirmed"],setup(h,{expose:x,emit:C}){const V=h,c=f(null),b=f(null),m=f(!1),n=_({an:null,hn:null,reason_for_admission:null}),e=_({an:null,hn:null,name:null,gender:null,age:null,ward_admit:null,admitted_at:null,discharged_at:null}),u=_({an:null});function k(){m.value=!0,u.an=null,Object.keys(e).map(s=>e[s]=null),window.axios.post(V.serviceEndpoint,{key:n.an}).then(s=>{if(!s.data.found){u.an=s.data.message;return}Object.keys(e).map(o=>e[o]=s.data[o])}).catch(s=>{console.log(s)}).finally(()=>{m.value=!1})}function j(){c.value.open(),Object.keys(e).map(s=>e[s]=null),S(()=>b.value.focus())}function O(){n.an=e.an,n.hn=e.hn,C("confirmed",{...n}),c.value.close()}return x({open:j}),(s,o)=>(l(),T(N,{to:"body"},[i($,{ref_key:"modal",ref:c,"width-mode":"form-cols-1",onClosed:o[2]||(o[2]=p=>Object.keys(n).map(a=>n[a]=null))},{header:d(()=>[q]),body:d(()=>{var p;return[t("div",I,[i(D,{label:"an",name:"an",modelValue:n.an,"onUpdate:modelValue":o[0]||(o[0]=a=>n.an=a),type:"tel",error:u.an,ref_key:"anInput",ref:b,onKeydown:A(k,["enter"])},null,8,["modelValue","error","onKeydown"]),i(F,{spin:m.value,class:"btn-complement w-full mt-2",onClick:k,disabled:!((p=n.an)!=null&&p.length)},{default:d(()=>[g(" SEARCH ")]),_:1},8,["spin","disabled"]),M,U,e.hn?(l(),r("div",H,[(l(!0),r(v,null,w([...Object.keys(e)].filter(a=>e[a]),a=>(l(),r("p",{class:"mt-1 whitespace-nowrap",key:a},[t("span",L,y(a.replaceAll("_"," "))+" : ",1),g(" "+y(e[a]),1)]))),128))])):(l(),r("div",{key:0,class:B(["bg-white rounded shadow p-2 lg:p-4 text-sm",{"animate-pulse":m.value}])},[(l(!0),r(v,null,w(Object.keys(e),a=>(l(),r("div",{class:"mt-1",key:a},[t("span",z,y(a)+" placeholder ",1)]))),128))],2)),i(E,{name:"slide-fade"},{default:d(()=>[e.hn?(l(),r("div",G,[J,i(R,{label:"reason for admission",modelValue:n.reason_for_admission,"onUpdate:modelValue":o[1]||(o[1]=a=>n.reason_for_admission=a),name:"reason_for_admission",options:h.admitReasons},null,8,["modelValue","options"])])):K("",!0)]),_:1})])]}),footer:d(()=>[t("div",P,[t("button",{class:"btn btn-accent",onClick:O,disabled:!e.an||!n.reason_for_admission}," Confirm ",8,Q)])]),_:1},512)]))}};export{ae as default};
