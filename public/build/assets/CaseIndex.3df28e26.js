import{r as $,C as z,o as s,c as n,b as e,d as o,w as d,t as c,F as l,v as y,E as T,U as B,_ as H,H as O,h as N,B as S,g as A,k as g,u as m,J as q,l as L,L as x,s as C,e as V}from"./app.e42e191b.js";import{p as D}from"./pickBy.27454957.js";import{t as E}from"./throttle.e789d76a.js";import{I}from"./IconDoubleRight.74b6ca9f.js";import{I as F}from"./IconUserMd.2f61cfac.js";import{_ as P}from"./PaginationNav.883a4236.js";import"./debounce.a5c4a23a.js";const U={class:"flex items-center w-full md:w-auto"},J=["value"],G={class:"flex justify-end form-input md:w-auto !border-l-0 !rounded-l-none"},K={class:"flex items-center cursor-pointer select-none group"},Q=e("div",null,"Scope : ",-1),W={class:"group-hover:text-accent-darker focus:text-accent-darker mr-1 whitespace-no-wrap"},X={class:"text-complement group-hover:text-accent-darker focus:text-accent-darker"},Y=e("div",{class:"p-1 rounded-full bg-white hover:bg-primary transition-colors ease-in-out duration-200"},[e("svg",{class:"w-3 h-3 text-accent group-hover:text-accent-darker focus:text-accent-darker",viewBox:"0 0 320 512"},[e("path",{fill:"currentColor",d:"M143 256.3L7 120.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0L313 86.3c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.4 9.5-24.6 9.5-34 .1zm34 192l136-136c9.4-9.4 9.4-24.6 0-33.9l-22.6-22.6c-9.4-9.4-24.6-9.4-33.9 0L160 352.1l-96.4-96.4c-9.4-9.4-24.6-9.4-33.9 0L7 278.3c-9.4 9.4-9.4 24.6 0 33.9l136 136c9.4 9.5 24.6 9.5 34 .1z"})])],-1),Z={class:"mt-2 py-2 shadow-xl bg-white text-complement cursor-pointer rounded text-sm"},R=["onClick"],ee={__name:"SearchIndex",props:{scopes:{type:Array,default:()=>[]},form:{type:Object,required:!0}},emits:["searchChanged","scopeChanged"],setup(r,{expose:u}){const k=r,v=$(null);return z(()=>k.form,E(function(i){let a=D(i);a=Object.keys(a).length?a:{remember:"forget"},B.Inertia.get(location.pathname,a,{preserveState:!0})},800),{deep:!0}),u({focus:()=>v.value.focus()}),(i,a)=>(s(),n("div",U,[e("input",{class:"form-input md:w-auto !border-r-0 !rounded-r-none",type:"text",name:"search",onInput:a[0]||(a[0]=h=>i.$emit("searchChanged",h.target.value)),value:r.form.search,placeholder:"search...",autocomplete:"off",ref_key:"searchInput",ref:v},null,40,J),e("div",G,[o(T,null,{default:d(()=>[e("div",K,[Q,e("div",W,[e("span",X,c(r.form.scope),1)]),Y])]),dropdown:d(()=>[e("div",Z,[(s(!0),n(l,null,y(r.scopes,(h,p)=>(s(),n("button",{class:"block w-full text-left font-semibold px-6 py-2 transition-colors duration-200 ease-out hover:bg-primary hover:text-accent-darker",key:p,onClick:_=>i.$emit("scopeChanged",h)},c(h),9,R))),128))])]),_:1})])]))}},te={},se={viewBox:"0 0 576 512"},ne=e("path",{fill:"currentColor",d:"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"},null,-1),oe=[ne];function re(r,u){return s(),n("svg",se,oe)}var j=H(te,[["render",re]]);const ce={},ae={viewBox:"0 0 448 512"},le=e("path",{fill:"currentColor",d:"M336 292v24c0 6.6-5.4 12-12 12h-76v76c0 6.6-5.4 12-12 12h-24c-6.6 0-12-5.4-12-12v-76h-76c-6.6 0-12-5.4-12-12v-24c0-6.6 5.4-12 12-12h76v-76c0-6.6 5.4-12 12-12h24c6.6 0 12 5.4 12 12v76h76c6.6 0 12 5.4 12 12zm112-180v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"},null,-1),ie=[le];function de(r,u){return s(),n("svg",ae,ie)}var M=H(ce,[["render",de]]);const ue={class:"flex flex-col-reverse md:flex-row justify-between items-center mb-4"},he={class:"bg-white rounded shadow overflow-x-auto hidden md:block"},_e={class:"w-full whitespace-nowrap"},me={class:"text-left font-semibold text-complement"},pe=["textContent","colspan"],fe={key:0,class:"px-6 py4 border-t"},xe={class:""},ye={key:1,class:"px-6 py4 border-t"},ve={class:"flex items-center justify-between"},be=["innerHTML"],ke=["innerHTML"],we=["textContent"],ge={class:"border-t"},Ce={class:"action-icon"},$e={class:"md:hidden"},Le={class:"flex justify-between items-center my-2 px-2"},Ie={class:"my-2 p-2 bg-gray-100 rounded space-y-2"},je={key:0,class:"flex justify-center items-center h-12"},Me={class:"flex items-center justify-between"},He=["innerHTML"],Ve={class:"font-semibold text-complement text-xs flex items-center"},ze={class:"block italic truncate"},Te={class:"flex items-center justify-between"},Be=V(" On : "),Oe=["textContent"],Ne={class:"flex items-center"},Se=V(" Type : "),Ae=["textContent"],qe=e("template",null,null,-1),Ke={__name:"CaseIndex",props:{cases:{type:Object,required:!0},filters:{type:Object,required:!0},routes:{type:Object,required:!0},can:{type:Object,required:!0}},setup(r){const u=r,k=O(()=>q(()=>import("./SearchAdmission.cfe8d177.js"),["assets/SearchAdmission.cfe8d177.js","assets/app.e42e191b.js","assets/app.7bdba1f1.css","assets/ModalDialog.24a203a7.js","assets/ModalDialog.db9c9a7c.css","assets/FormInput.591c2454.js","assets/SpinnerButton.e1a68488.js"])),v=$(null),b=N({hn:null,an:null}),i=S({search:u.filters.search,scope:u.filters.scope}),a=p=>{b.hn=p.hn,b.an=p.an,b.post(u.routes.store)},h=$(null);return A(()=>h.value.focus()),(p,_)=>(s(),n(l,null,[e("div",ue,[o(ee,{scopes:["active","discharged","all"],form:i,onSearchChanged:_[0]||(_[0]=t=>i.search=t),onScopeChanged:_[1]||(_[1]=t=>i.scope=t),ref_key:"searchInput",ref:h},null,8,["form"]),r.can.create?(s(),n("button",{key:0,class:"btn btn-accent w-full mb-4 md:w-auto md:px-4 md:mb-0",onClick:_[2]||(_[2]=t=>p.$refs.searchAdmission.open())}," Create New Case ")):g("",!0)]),e("div",he,[e("table",_e,[e("tr",me,[(s(),n(l,null,y(["HN","Name","On","Type","Status","MD"],t=>e("th",{class:"px-6 pt-6 pb-4",key:t,textContent:c(t),colspan:t==="MD"?2:1},null,8,pe)),64))]),(s(!0),n(l,null,y(r.cases.data,(t,w)=>(s(),n("tr",{class:"focus-within:bg-primary-darker",key:w},[(s(),n(l,null,y(["hn","patient_name","date_note","dialysis_type","status","md"],f=>(s(),n(l,{key:f},[f==="date_note"?(s(),n("td",fe,[e("span",{class:L(["inline-flex h-6 w-6 mr-2 rounded-full items-center justify-center text-sm italic",{"text-complement bg-primary-darker":t.dialysis_at==="in","text-primary bg-complement":t.dialysis_at==="out"}])},c(t.dialysis_at),3),e("span",xe,c(t.date_note),1)])):f==="status"?(s(),n("td",ye,[e("div",ve,[t.can.edit_order?(s(),n(l,{key:0},[e("span",{innerHTML:t[f]},null,8,be),o(m(x),{href:t.routes.edit_order,class:"action-icon"},{default:d(()=>[o(j,{class:"w-4 h-4"})]),_:2},1032,["href"])],64)):t.can.create_order?(s(),C(m(x),{key:1,href:t.routes.create_order,class:"action-icon"},{default:d(()=>[o(M,{class:"w-4 h-4"})]),_:2},1032,["href"])):(s(),n("span",{key:2,innerHTML:t[f]},null,8,ke))])])):(s(),n("td",{key:2,class:"px-6 py4 border-t",textContent:c(t[f])},null,8,we))],64))),64)),e("td",ge,[o(m(x),{class:"px-4 py-2 flex items-center",href:t.routes.edit},{default:d(()=>[e("span",Ce,[o(I,{class:"w-4 h-4"})])]),_:2},1032,["href"])])]))),128))])]),e("div",$e,[(s(!0),n(l,null,y(r.cases.data,(t,w)=>(s(),n("div",{class:"bg-white rounded shadow my-4 p-4",key:w},[e("div",Le,[e("div",null," HN: "+c(t.hn)+" "+c(t.patient_name),1),o(m(x),{href:t.routes.edit,class:"action-icon-mobile"},{default:d(()=>[o(I,{class:"w-4 h-4"})]),_:2},1032,["href"])]),e("div",Ie,[t.md?(s(),n(l,{key:1},[e("div",Me,[e("span",{innerHTML:t.status},null,8,He),e("p",Ve,[o(F,{class:"h-3 w-3 mr-1"}),e("span",ze,c(t.md),1)])]),e("div",Te,[e("p",null,[Be,e("span",{class:"text-complement font-semibold",textContent:c(t.date_note)},null,8,Oe),e("span",{class:L(["text-sm italic ml-1",{"text-accent":t.dialysis_at==="in","text-complement":t.dialysis_at==="out"}])},c(t.dialysis_at),3)]),e("p",Ne,[Se,e("span",{class:"text-complement font-semibold",textContent:c(t.dialysis_type)},null,8,Ae),t.can.edit_order?(s(),C(m(x),{key:0,href:t.routes.edit_order,class:"ml-2 p-2 rounded-full bg-primary-darker text-accent"},{default:d(()=>[o(j,{class:"w-4 h-4"})]),_:2},1032,["href"])):g("",!0)])]),qe],64)):(s(),n("div",je,[t.can.create_order?(s(),C(m(x),{key:0,href:t.routes.create_order,class:"p-2 rounded-full bg-primary-darker text-accent"},{default:d(()=>[o(M,{class:"w-4 h-4"})]),_:2},1032,["href"])):g("",!0)]))])]))),128))]),o(P,{links:r.cases.links},null,8,["links"]),o(m(k),{ref_key:"searchAdmission",ref:v,onConfirmed:a,mode:"hn","service-endpoint":r.routes.serviceEndpoint},null,8,["service-endpoint"])],64))}};export{Ke as default};
