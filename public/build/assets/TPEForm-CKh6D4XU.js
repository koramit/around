import{k as y,v as C,r as F,h as s,c as p,b as t,d as n,f as w,g,e as V,m as b,j as q,x as h,p as A,u as I,F as E}from"./app-RCW056iM.js";import{_ as f}from"./FormCheckbox-gE-v-3kn.js";import{_ as d}from"./FormInput-DTViGuGV.js";import{_ as i}from"./FormSelect-BBQdMGEr.js";import{_ as v}from"./FormRadio-B65iGHfp.js";import j from"./FormSelectOther-Du1WtWYQ.js";import{u as B}from"./useSelectOther-B2OPxx7Y.js";import{I as D}from"./IconCopy-CG3Hw5Li.js";import"./ModalDialog-D900HAns.js";const L={class:"mt-6 md:mt-12 xl:mt-24 flex justify-between items-center",id:"prescription"},T={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4"},G={key:0,class:"grid gap-2 md:grid-cols-2 md:gap-4 xl:gap-8"},S={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4"},H={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4"},R={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},W={key:0,class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},J={key:1},K={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},M={key:2,class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},Q={key:3,class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},X={key:4,class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},te={__name:"TPEForm",props:{modelValue:{type:Object,required:!0},formConfigs:{type:Object,required:!0}},emits:["update:modelValue","autosave","copyPreviousOrder"],setup(x,{emit:P}){const $=x,U=P,l=y({...$.modelValue}),u={anticoagulant:l.anticoagulant??null,access_type:l.access_type??null};C(()=>l,a=>{a.anticoagulant!==u.anticoagulant&&(a.anticoagulant_none_drip_via_peripheral_iv=!1,a.anticoagulant_none_nss_200ml_flush_q_hour=!1,a.heparin_loading_dose=null,a.heparin_maintenance_dose=null,a.enoxaparin_dose=null,a.fondaparinux_bolus_dose=null,a.tinzaparin_dose=null,u.anticoagulant=a.anticoagulant),(a.access_type==="pending"||a.access_type==="Remove"||["DLC","Perm cath"].includes(a.access_type)&&!["DLC","Perm cath"].includes(u.access_type)||["AVF","AVG"].includes(a.access_type)&&!["AVF","AVG"].includes(u.access_type))&&(a.access_site_coagulant="",u.access_type=a.access_type),a.replacement_fluid_albumin||(a.replacement_fluid_albumin_concentrated=null,a.replacement_fluid_albumin_volume=null),a.replacement_fluid_ffp||(a.replacement_fluid_ffp_volume=null),U("update:modelValue",a),U("autosave")},{deep:!0});const r=y({...$.formConfigs});l.anticoagulant&&r.anticoagulants.findIndex(a=>a.value===l.anticoagulant)===-1&&r.anticoagulants.push({value:l.anticoagulant,label:l.anticoagulant});const z=F(null);C(()=>l.anticoagulant,a=>{a.toLowerCase()==="other"&&(_.placeholder="Other anticoagulant",_.configs=r.anticoagulants,_.input=z.value,k.value.open())});const{selectOtherInput:k,selectOther:_,selectOtherClosed:O}=B(),m=y({heparin_loading_dose:null,heparin_maintenance_dose:null,enoxaparin_dose:null,tinzaparin_dose:null}),c=a=>{let e=r.validators[a];const o=e.type==="integer"?parseInt(l[a]):parseFloat(l[a]);o<e.min||o>e.max?(m[a]=`${l[a]} could not be saved. Accept range [${e.min}, ${e.max}].`,l[a]=null):m[a]=""};return(a,e)=>(s(),p(E,null,[t("h2",L,[e[29]||(e[29]=t("span",{class:"form-label !mb-0 text-lg italic text-complement"},"TPE Prescription",-1)),x.formConfigs.can.copy?(s(),p("button",{key:0,class:"flex items-center text-sm text-accent",onClick:e[0]||(e[0]=o=>a.$emit("copyPreviousOrder"))},[n(D,{class:"w-3 h-3 mr-1"}),e[28]||(e[28]=w(" Copy previous order "))])):g("",!0)]),e[33]||(e[33]=t("hr",{class:"my-4 border-b border-accent"},null,-1)),t("div",T,[n(i,{label:"access type",modelValue:l.access_type,"onUpdate:modelValue":e[1]||(e[1]=o=>l.access_type=o),name:"tpe.access_type",error:a.$page.props.errors["tpe.access_type"],options:r.access_types},null,8,["modelValue","error","options"]),n(i,{label:"access site",modelValue:l.access_site_coagulant,"onUpdate:modelValue":e[2]||(e[2]=o=>l.access_site_coagulant=o),name:"tpe.access_site_coagulant",error:a.$page.props.errors["tpe.access_site_coagulant"],options:l.access_type&&l.access_type.startsWith("AV")?r.av_access_sites:r.non_av_access_sites,disabled:!l.access_type||l.access_type==="pending"},null,8,["modelValue","error","options","disabled"]),n(i,{modelValue:l.dialyzer,"onUpdate:modelValue":e[3]||(e[3]=o=>l.dialyzer=o),name:"tpe.dialyzer",error:a.$page.props.errors["tpe.dialyzer"],label:"dialyzer",options:r.tpe_dialyzers},null,8,["modelValue","error","options"])]),e[34]||(e[34]=t("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1)),e[35]||(e[35]=t("label",{class:"form-label"},"replacement",-1)),n(f,{modelValue:l.replacement_fluid_albumin,"onUpdate:modelValue":e[4]||(e[4]=o=>l.replacement_fluid_albumin=o),name:"tpe.replacement_fluid_albumin",label:"Albumin",class:"mt-2 md:mt-4",toggler:!0},null,8,["modelValue"]),n(b,{name:"slide-fade"},{default:V(()=>[l.replacement_fluid_albumin?(s(),p("div",G,[t("div",null,[e[30]||(e[30]=t("label",{class:"form-label"},"concentrated (%)",-1)),n(v,{modelValue:l.replacement_fluid_albumin_concentrated,"onUpdate:modelValue":e[5]||(e[5]=o=>l.replacement_fluid_albumin_concentrated=o),name:"tpe.replacement_fluid_albumin_concentrated",error:a.$page.props.errors["tpe.replacement_fluid_albumin_concentrated"],class:"grid grid-cols-2 gap-2 md:gap-4",options:r.replacement_fluid_albumin_concentrated},null,8,["modelValue","error","options"])]),n(d,{modelValue:l.replacement_fluid_albumin_volume,"onUpdate:modelValue":e[6]||(e[6]=o=>l.replacement_fluid_albumin_volume=o),type:"tel",name:"tpe.replacement_fluid_albumin_volume",error:a.$page.props.errors["tpe.replacement_fluid_albumin_volume"],label:"volume (ml)"},null,8,["modelValue","error"])])):g("",!0)]),_:1}),n(f,{modelValue:l.replacement_fluid_ffp,"onUpdate:modelValue":e[7]||(e[7]=o=>l.replacement_fluid_ffp=o),name:"tpe.replacement_fluid_ffp",label:"FFP",class:"mt-2 md:mt-4",toggler:!0},null,8,["modelValue"]),n(b,{name:"slide-fade"},{default:V(()=>[l.replacement_fluid_ffp?(s(),q(d,{key:0,modelValue:l.replacement_fluid_ffp_volume,"onUpdate:modelValue":e[8]||(e[8]=o=>l.replacement_fluid_ffp_volume=o),type:"tel",name:"tpe.replacement_fluid_ffp_volume",error:a.$page.props.errors["tpe.replacement_fluid_ffp_volume"],label:"volume (ml)"},null,8,["modelValue","error"])):g("",!0)]),_:1}),n(h,{class:"my-2 md:my-4 xl:my-8",title:"Volume of exchange (l)",message:"[1.5-2.0] EPV, EPV = 0.065 x weight (kg) x (1-hct)."}),e[36]||(e[36]=t("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1)),t("div",S,[n(i,{modelValue:l.blood_pump,"onUpdate:modelValue":e[9]||(e[9]=o=>l.blood_pump=o),name:"tpe.blood_pump",error:a.$page.props.errors["tpe.blood_pump"],label:"blood pump (ml/min)",options:r.blood_pump},null,8,["modelValue","error","options"]),n(i,{modelValue:l.filtration_pump,"onUpdate:modelValue":e[10]||(e[10]=o=>l.filtration_pump=o),name:"tpe.filtration_pump",error:a.$page.props.errors["tpe.filtration_pump"],label:"filtration pump (%)",options:r.tpe_filtration_pump_options},null,8,["modelValue","error","options"]),n(i,{modelValue:l.replacement_pump,"onUpdate:modelValue":e[11]||(e[11]=o=>l.replacement_pump=o),name:"tpe.replacement_pump",error:a.$page.props.errors["tpe.replacement_pump"],label:"replacement pump (%)",options:r.tpe_replacement_pump_options},null,8,["modelValue","error","options"]),n(d,{modelValue:l.drain_pump,"onUpdate:modelValue":e[12]||(e[12]=o=>l.drain_pump=o),type:"tel",name:"tpe.drain_pump",error:a.$page.props.errors["tpe.drain_pump"],label:"drain pump (%)"},null,8,["modelValue","error"])]),e[37]||(e[37]=t("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1)),t("div",H,[t("div",null,[e[31]||(e[31]=t("label",{class:"form-label"},"10% calcium gluconate volume (ml)",-1)),n(v,{modelValue:l.calcium_gluconate_10_percent_volume,"onUpdate:modelValue":e[13]||(e[13]=o=>l.calcium_gluconate_10_percent_volume=o),class:A(["grid gap-2 md:gap-4",{"grid-cols-3":!l.calcium_gluconate_10_percent_volume,"grid-cols-2 sm:grid-cols-4":l.calcium_gluconate_10_percent_volume}]),name:"tpe.calcium_gluconate_10_percent_volume",error:a.$page.props.errors["tpe.calcium_gluconate_10_percent_volume"],options:r.calcium_gluconate_10_percent_volumes,"allow-reset":!0},null,8,["modelValue","class","error","options"])]),t("div",null,[e[32]||(e[32]=t("label",{class:"form-label"},"10% calcium gluconate timing (at hour)",-1)),n(v,{modelValue:l.calcium_gluconate_10_percent_timing,"onUpdate:modelValue":e[14]||(e[14]=o=>l.calcium_gluconate_10_percent_timing=o),name:"tpe.calcium_gluconate_10_percent_timing",error:a.$page.props.errors["tpe.calcium_gluconate_10_percent_timing"],options:r.calcium_gluconate_10_percent_timings,"allow-reset":!0,class:A(["grid gap-2 md:gap-4 grid-cols-2",{"grid-cols-3":l.calcium_gluconate_10_percent_timing}])},null,8,["modelValue","error","options","class"])])]),e[38]||(e[38]=t("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1)),t("div",R,[n(i,{modelValue:l.anticoagulant,"onUpdate:modelValue":e[15]||(e[15]=o=>l.anticoagulant=o),name:"tpe.anticoagulant",label:"anticoagulant",options:r.anticoagulants,ref_key:"anticoagulantInput",ref:z,error:a.$page.props.errors["tpe.anticoagulant"]},null,8,["modelValue","options","error"])]),n(b,{name:"slide-fade"},{default:V(()=>[l.anticoagulant==="none"?(s(),p("div",W,[n(f,{label:"anticoagulant drip via peripheral IV",name:"anticoagulant_none_drip_via_peripheral_iv",modelValue:l.anticoagulant_none_drip_via_peripheral_iv,"onUpdate:modelValue":e[16]||(e[16]=o=>l.anticoagulant_none_drip_via_peripheral_iv=o)},null,8,["modelValue"]),n(f,{label:"NSS 200 ml flush q 1 hour",name:"anticoagulant_none_nss_200ml_flush_q_hour",modelValue:l.anticoagulant_none_nss_200ml_flush_q_hour,"onUpdate:modelValue":e[17]||(e[17]=o=>l.anticoagulant_none_nss_200ml_flush_q_hour=o)},null,8,["modelValue"])])):l.anticoagulant==="heparin"?(s(),p("div",J,[t("div",K,[n(d,{label:"loading dose (iu)",name:"tpe.heparin_loading_dose",modelValue:l.heparin_loading_dose,"onUpdate:modelValue":e[18]||(e[18]=o=>l.heparin_loading_dose=o),type:"number",pattern:"\\d*",onAutosave:e[19]||(e[19]=o=>c("heparin_loading_dose")),error:m.heparin_loading_dose??a.$page.props.errors["tpe.heparin_loading_dose"],placeholder:`[${r.validators.heparin_loading_dose.min}, ${r.validators.heparin_loading_dose.max}] IU`},null,8,["modelValue","error","placeholder"]),n(d,{label:"maintenance dose (iu/hour)",name:"tpe.heparin_maintenance_dose",modelValue:l.heparin_maintenance_dose,"onUpdate:modelValue":e[20]||(e[20]=o=>l.heparin_maintenance_dose=o),type:"number",pattern:"\\d*",onAutosave:e[21]||(e[21]=o=>c("heparin_maintenance_dose")),error:m.heparin_maintenance_dose??a.$page.props.errors["tpe.heparin_maintenance_dose"],placeholder:`[${r.validators.heparin_maintenance_dose.min}, ${r.validators.heparin_maintenance_dose.max}] IU/Hour`},null,8,["modelValue","error","placeholder"])]),n(h,{title:"Duration of maintenance (hours)",message:"DLC/PC uses duration of dialysis. AVF/AVG uses duration of dialysis - 1."})])):l.anticoagulant==="enoxaparin"?(s(),p("div",M,[n(d,{label:"dose (ml)",name:"tpe.enoxaparin_dose",modelValue:l.enoxaparin_dose,"onUpdate:modelValue":e[22]||(e[22]=o=>l.enoxaparin_dose=o),type:"number",onAutosave:e[23]||(e[23]=o=>c("enoxaparin_dose")),error:m.enoxaparin_dose??a.$page.props.errors["tpe.enoxaparin_dose"],placeholder:`[${r.validators.enoxaparin_dose.min}, ${r.validators.enoxaparin_dose.max}] ml`},null,8,["modelValue","error","placeholder"])])):l.anticoagulant==="fondaparinux"?(s(),p("div",Q,[n(i,{label:"bolus dose (iu)",name:"tpe.fondaparinux_bolus_dose",modelValue:l.fondaparinux_bolus_dose,"onUpdate:modelValue":e[24]||(e[24]=o=>l.fondaparinux_bolus_dose=o),options:r.fondaparinux_bolus_doses,error:a.$page.props.errors["tpe.fondaparinux_bolus_dose"]},null,8,["modelValue","options","error"])])):l.anticoagulant==="tinzaparin"?(s(),p("div",X,[n(d,{label:"dose (iu)",name:"tpe.tinzaparin_dose",modelValue:l.tinzaparin_dose,"onUpdate:modelValue":e[25]||(e[25]=o=>l.tinzaparin_dose=o),type:"number",pattern:"\\d*",onAutosave:e[26]||(e[26]=o=>c("tinzaparin_dose")),error:m.tinzaparin_dose??a.$page.props.errors["tpe.tinzaparin_dose"],placeholder:`[${r.validators.tinzaparin_dose.min}, ${r.validators.tinzaparin_dose.max}] IU`},null,8,["modelValue","error","placeholder"])])):g("",!0)]),_:1}),n(j,{placeholder:I(_).placeholder,ref_key:"selectOtherInput",ref:k,onClosed:e[27]||(e[27]=o=>I(O)(o,!0))},null,8,["placeholder"])],64))}};export{te as default};
