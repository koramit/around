import{_ as C,b as a,c as n,d as s,r as m,t as $,k as p,h as i,e as f,f as g,q as x,I as w}from"./app-BbT5DcaR.js";import{I as V}from"./IconEyesSlash-C8fVh9lW.js";import{I}from"./IconEyes-uxGXeApR.js";const H={},b={viewBox:"0 0 512 512"},z=s("path",{fill:"currentColor",d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},null,-1),M=[z];function B(t,h){return a(),n("svg",b,M)}const E=C(H,[["render",B]]),S={},q={viewBox:"0 0 512 512"},N=s("path",{fill:"currentColor",d:"M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z"},null,-1),T=[N];function D(t,h){return a(),n("svg",q,T)}const G=C(S,[["render",D]]),j={},F={viewBox:"0 0 448 512"},O=s("path",{fill:"currentColor",d:"M143 207C152.4 197.7 167.6 197.7 176.1 207L223.1 254.1L271 207C280.4 197.7 295.6 197.7 304.1 207C314.3 216.4 314.3 231.6 304.1 240.1L257.9 287.1L304.1 335C314.3 344.4 314.3 359.6 304.1 368.1C295.6 378.3 280.4 378.3 271 368.1L223.1 321.9L176.1 368.1C167.6 378.3 152.4 378.3 143 368.1C133.7 359.6 133.7 344.4 143 335L190.1 287.1L143 240.1C133.7 231.6 133.7 216.4 143 207V207zM317.5 24.94L354.2 80H424C437.3 80 448 90.75 448 104C448 117.3 437.3 128 424 128H412.4L388.4 452.7C385.9 486.1 358.1 512 324.6 512H123.4C89.92 512 62.09 486.1 59.61 452.7L35.56 128H24C10.75 128 0 117.3 0 104C0 90.75 10.75 80 24 80H93.82L130.5 24.94C140.9 9.357 158.4 0 177.1 0H270.9C289.6 0 307.1 9.358 317.5 24.94V24.94zM151.5 80H296.5L277.5 51.56C276 49.34 273.5 48 270.9 48H177.1C174.5 48 171.1 49.34 170.5 51.56L151.5 80zM107.5 449.2C108.1 457.5 115.1 464 123.4 464H324.6C332.9 464 339.9 457.5 340.5 449.2L364.3 128H83.69L107.5 449.2z"},null,-1),U=[O];function X(t,h){return a(),n("svg",F,U)}const A=C(j,[["render",X]]),J={class:"flex items-center"},K={class:"form-label !mb-0 !inline"},P={key:2},Q={key:0,class:"text-red-700 text-sm"},R=["src"],ee={__name:"ImageUploader",props:{modelValue:{type:String,default:""},label:{type:String,required:!0},pathname:{type:String,required:!0},error:{type:String,default:""},readonly:{type:Boolean},serviceEndpoints:{type:Object,required:!0}},emits:["update:modelValue","autosave","removed"],setup(t,{emit:h}){const u=h,o=t,y=m(null),k=m(null),c=m(!1),r=m(!1),v=m(o.modelValue),_=d=>{r.value=!0;let e=new FormData;e.append("file",d.target.files[0]),e.append("pathname",o.pathname),e.append("old",o.modelValue),window.axios.post(o.serviceEndpoints.store,e).then(l=>{v.value=l.data.filename,u("update:modelValue",l.data.filename),u("autosave"),c.value||(c.value=!0)}).catch(l=>{console.log(l)}).finally(()=>{r.value=!1})};function L(){r.value=!0,c.value=!1,window.axios.delete(o.serviceEndpoints.destroy,{data:{path:o.pathname+"/"+o.modelValue}}).then(function(){v.value="",u("update:modelValue",""),u("autosave"),u("removed")}).catch(d=>{console.log(d)}).finally(()=>{r.value=!1})}return(d,e)=>(a(),n("div",null,[s("div",J,[s("p",null,[s("span",K,$(t.label),1),r.value?(a(),p(w,{key:0,class:"ml-1 w-4 h-4 inline-block opacity-25 animate-spin"})):i("",!0)]),t.readonly?i("",!0):(a(),n("button",{key:0,class:"ml-4",onClick:e[0]||(e[0]=l=>y.value.click())},[f(E,{class:"w-4 h-4 text-thick-theme-light"})])),t.readonly?i("",!0):(a(),n("button",{key:1,class:"ml-4",onClick:e[1]||(e[1]=l=>k.value.click())},[f(G,{class:"w-4 h-4 text-thick-theme-light"})])),t.modelValue?(a(),n("span",P,[s("button",{class:"ml-4",onClick:e[2]||(e[2]=l=>c.value=!c.value)},[c.value?(a(),p(V,{key:0,class:"w-4 h-4 text-dark-theme-light"})):(a(),p(I,{key:1,class:"w-4 h-4 text-dark-theme-light"}))]),t.serviceEndpoints.destroy!==void 0?(a(),n("button",{key:0,class:"ml-4",onClick:L},[f(A,{class:"w-4 h-4 text-red-400"})])):i("",!0)])):i("",!0)]),t.error?(a(),n("div",Q,$(t.error),1)):i("",!0),f(x,{name:"slide-fade"},{default:g(()=>[t.modelValue!==void 0&&c.value?(a(),n("img",{key:0,src:`${t.serviceEndpoints.show}?path=${t.pathname}/${v.value}`,onLoadstart:e[3]||(e[3]=l=>r.value=!0),onLoad:e[4]||(e[4]=l=>d.$nextTick(()=>r.value=!1)),alt:""},null,40,R)):i("",!0)]),_:1}),s("input",{class:"hidden",type:"file",ref_key:"useCamera",ref:y,onInput:_,capture:"environment",accept:"image/*"},null,544),s("input",{class:"hidden",type:"file",ref_key:"useGallery",ref:k,onInput:_,accept:"image/*"},null,544)]))}};export{A as I,ee as _};
