import{_ as C,v as h,r as D,C as k,A as w,o as t,c as n,F as _,a as m,b as s,e as v,f as g,w as P,T as A,d as x,t as I,s as N,p as S,l as L}from"./app.188a3521.js";import{_ as F}from"./FormRadio.191fb4d9.js";import{I as O}from"./IconLine.02f36ad5.js";import{_ as b}from"./FormCheckbox.ada4ed44.js";const c=l=>(S("data-v-653411de"),l=l(),L(),l),q=c(()=>s("h2",{class:"form-label"}," Preferences ",-1)),R=c(()=>s("h2",{class:"mt-6 md:mt-12 xl:mt-24 form-label italic text-xl text-complement",id:"line-application"}," line application ",-1)),T=c(()=>s("hr",{class:"my-4 border-b border-accent"},null,-1)),K=c(()=>s("p",{class:"font-medium italic text-complement"}," Collect email address from LINE account ",-1)),$=c(()=>s("p",{class:"mt-2 md:mt-4"}," So we can send you less importance notifications to this email, totally optional. ",-1)),M=["href"],Y={key:1,class:"px-2 py-1 md:px-4 md:py-2 bg-accent text-white rounded-3xl italic"},z=["href"],G={key:3,class:"px-2 py-1 md:px-4 md:py-2 bg-line-app text-white rounded-3xl italic"},H=c(()=>s("hr",{class:"my-4 border-b border-dashed"},null,-1)),J=c(()=>s("h2",{class:"mt-6 md:mt-12 xl:mt-24 form-label italic text-xl text-complement",id:"notifications"}," notifications ",-1)),Q=c(()=>s("hr",{class:"my-4 border-b border-accent"},null,-1)),W={key:0},X=c(()=>s("h3",{class:"mt-4 mb-2 md:mt-8 md:mb-4 font-medium text-complement"}," Events ",-1)),Z={class:"p-2 md:p-4 border-l-2 border-accent space-y-2 md:space-y-4"},ee={class:"italic"},te=c(()=>s("h3",{class:"mt-4 mb-2 md:mt-8 md:mb-4 font-medium text-complement"}," Channels ",-1)),le={key:0,class:"p-2 md:p-4 border-l-2 border-accent space-y-2 md:space-y-4"},se={class:"italic"},ne={__name:"PreferencePage",props:{preferences:{type:Object,required:!0},configs:{type:Object,required:!0}},setup(l){const p=l,V=h({line_email_consent:"accepted"}),j=h({lineEmailConsentOptions:[{value:"accepted",label:"Yes please"},{value:"declined",label:"NO, I'm good"}]}),E=D(null),i=h({...p.preferences.notification}),f=h({...p.configs.event_based_notifications}),u=h({...p.configs.subscribed_channels});k([()=>f,()=>u],()=>U(),{deep:!0});const U=w(()=>{var e,o;let y=(e=Object.keys(f).map(d=>f[d].filter(r=>r.subscribed).map(r=>r.id))[0])!=null?e:[],a=(o=Object.keys(u).map(d=>u[d].filter(r=>r.subscribed).map(r=>r.id))[0])!=null?o:[];window.axios.patch(p.configs.routes.update,{subscriptions:y.concat(a)}).catch(d=>console.log(d))},1500);k(()=>i,()=>B(),{deep:!0});const B=w(()=>{window.axios.patch(p.configs.routes.update,{notification:{...i}}).catch(y=>console.log(y))},1500);return(y,a)=>(t(),n(_,null,[q,R,T,l.configs.can.link_line&&l.configs.routes.link_line?(t(),n(_,{key:0},[K,$,m(F,{class:"mt-4 md:mt-8 md:w-1/2 md:grid grid-cols-2 gap-x-4",name:"line_email_consent",modelValue:V.line_email_consent,"onUpdate:modelValue":a[0]||(a[0]=e=>V.line_email_consent=e),options:j.lineEmailConsentOptions},null,8,["modelValue","options"]),s("a",{class:"flex justify-center items-center gap-x-2 btn btn-accent bg-line w-full md:w-1/2 mt-4 md:mt-8",href:l.configs.routes.link_line+"?email_consent="+V.line_email_consent},[m(O,{class:"w-6 h-6 text-white"}),v(" LINK ")],8,M)],64)):l.configs.routes.link_line&&!l.configs.friends.line?(t(),n("span",Y,"LINKED")):g("",!0),l.configs.can.add_line&&l.configs.routes.add_line?(t(),n("a",{key:2,class:"flex justify-center items-center gap-x-2 btn btn-accent bg-line w-full md:w-1/2 mt-4 md:mt-8",href:l.configs.routes.add_line,target:"_blank",ref_key:"lineAddButton",ref:E},[m(O,{class:"w-6 h-6 text-white"}),v(" ADD FRIEND ")],8,z)):l.configs.friends.line?(t(),n("span",G,"FRIENDED")):g("",!0),H,J,Q,m(b,{label:"Mute",name:"mute",class:"my-2 md:my-4",toggler:!0,modelValue:i.mute,"onUpdate:modelValue":a[1]||(a[1]=e=>i.mute=e)},null,8,["modelValue"]),m(A,{name:"slide-fade"},{default:P(()=>[i.mute?g("",!0):(t(),n("div",W,[X,m(b,{class:"my-2 md:my-4",label:"Request approval updates",name:"notify_approval_result",modelValue:i.notify_approval_result,"onUpdate:modelValue":a[2]||(a[2]=e=>i.notify_approval_result=e),toggler:!0},null,8,["modelValue"]),s("section",Z,[(t(!0),n(_,null,x(Object.keys(f),e=>(t(),n("div",{key:e},[s("label",ee,I(e)+" :",1),(t(!0),n(_,null,x(f[e],o=>(t(),N(b,{key:o.id,label:o.label,toggler:!0,modelValue:o.subscribed,"onUpdate:modelValue":d=>o.subscribed=d,class:"mt-2 md:mt-4"},null,8,["label","modelValue","onUpdate:modelValue"]))),128))]))),128))]),te,m(b,{class:"my-2 md:my-4",label:"Auto subscribe to channel I create",name:"auto_subscribe_to_channel",modelValue:i.auto_subscribe_to_channel,"onUpdate:modelValue":a[3]||(a[3]=e=>i.auto_subscribe_to_channel=e),toggler:!0},null,8,["modelValue"]),m(b,{class:"my-2 md:my-4",label:"Auto unsubscribe from an inactive channel",name:"auto_unsubscribe_to_channel",modelValue:i.auto_unsubscribe_to_channel,"onUpdate:modelValue":a[4]||(a[4]=e=>i.auto_unsubscribe_to_channel=e),toggler:!0},null,8,["modelValue"]),Object.keys(u).length?(t(),n("section",le,[(t(!0),n(_,null,x(Object.keys(u),e=>(t(),n("div",{key:e},[s("label",se,I(e)+" :",1),(t(!0),n(_,null,x(u[e],o=>(t(),N(b,{key:o.id,label:o.label,toggler:!0,modelValue:o.subscribed,"onUpdate:modelValue":d=>o.subscribed=d,class:"mt-2 md:mt-4"},null,8,["label","modelValue","onUpdate:modelValue"]))),128))]))),128))])):g("",!0)]))]),_:1})],64))}};var de=C(ne,[["__scopeId","data-v-653411de"]]);export{de as default};
