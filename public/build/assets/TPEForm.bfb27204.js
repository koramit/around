import{s as V,E as w,r as B,o as i,c as p,a as t,b as n,i as f,w as b,T as v,q as D,af as F,k as q,u as E,F as L,d as j}from"./app.70e2076b.js";import{_ as y}from"./FormCheckbox.c7f3d677.js";import{_ as m}from"./FormInput.5cee54ab.js";import{_ as d}from"./FormSelect.ba76a9e2.js";import{_ as x}from"./FormRadio.183f5ab8.js";import{u as G,_ as S}from"./FormSelectOther.be762b69.js";import{I as H}from"./IconCopy.19139614.js";import"./ModalDialog.23dc38e1.js";const R={class:"mt-6 md:mt-12 xl:mt-24 flex justify-between items-center",id:"prescription"},W=t("span",{class:"form-label !mb-0 text-lg italic text-complement"},"TPE Prescription",-1),J=j(" Copy previous order "),K=t("hr",{class:"my-4 border-b border-accent"},null,-1),M={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4"},Q=t("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1),X=t("label",{class:"form-label"},"replacement",-1),Y={key:0,class:"grid gap-2 md:grid-cols-2 md:gap-4 xl:gap-8"},Z=t("label",{class:"form-label"},"concentrated (%)",-1),N=t("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1),ee={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4"},ae=t("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1),le={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4"},oe=t("label",{class:"form-label"},"10% calcium gluconate volume (ml)",-1),ne=t("label",{class:"form-label"},"10% calcium gluconate timing (at hour)",-1),re=t("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1),te={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},se={key:0,class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},ie={key:1},pe={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},de={key:2,class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},me={key:3,class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},ue={key:4,class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},xe={__name:"TPEForm",props:{modelValue:{type:Object,required:!0},formConfigs:{type:Object,required:!0}},emits:["update:modelValue","autosave","copyPreviousOrder"],setup(h,{emit:$}){var C,A;const U=h,e=V({...U.modelValue}),_={anticoagulant:(C=e.anticoagulant)!=null?C:null,access_type:(A=e.access_type)!=null?A:null};w(()=>e,l=>{l.anticoagulant!==_.anticoagulant&&(l.anticoagulant_none_drip_via_peripheral_iv=!1,l.anticoagulant_none_nss_200ml_flush_q_hour=!1,l.heparin_loading_dose=null,l.heparin_maintenance_dose=null,l.enoxaparin_dose=null,l.fondaparinux_bolus_dose=null,l.tinzaparin_dose=null,_.anticoagulant=l.anticoagulant),(l.access_type==="pending"||l.access_type==="Remove"||["DLC","Perm cath"].includes(l.access_type)&&!["DLC","Perm cath"].includes(_.access_type)||["AVF","AVG"].includes(l.access_type)&&!["AVF","AVG"].includes(_.access_type))&&(l.access_site_coagulant="",_.access_type=l.access_type),l.replacement_fluid_albumin||(l.replacement_fluid_albumin_concentrated=null,l.replacement_fluid_albumin_volume=null),l.replacement_fluid_ffp||(l.replacement_fluid_ffp_volume=null),$("update:modelValue",l),$("autosave")},{deep:!0});const r=V({...U.formConfigs});e.anticoagulant&&r.anticoagulants.findIndex(l=>l.value===e.anticoagulant)===-1&&r.anticoagulants.push({value:e.anticoagulant,label:e.anticoagulant});const z=B(null);w(()=>e.anticoagulant,l=>{l.toLowerCase()==="other"&&(c.placeholder="Other anticoagulant",c.configs=r.anticoagulants,c.input=z.value,k.value.open())});const{selectOtherInput:k,selectOther:c,selectOtherClosed:T}=G(),u=V({heparin_loading_dose:null,heparin_maintenance_dose:null,enoxaparin_dose:null,tinzaparin_dose:null}),g=l=>{let a=r.validators[l];const o=a.type==="integer"?parseInt(e[l]):parseFloat(e[l]);o<a.min||o>a.max?(u[l]=`${e[l]} could not be saved. Accept range [${a.min}, ${a.max}].`,e[l]=null):u[l]=""};return(l,a)=>(i(),p(L,null,[t("h2",R,[W,h.formConfigs.can.copy?(i(),p("button",{key:0,class:"flex items-center text-sm text-accent",onClick:a[0]||(a[0]=o=>l.$emit("copyPreviousOrder"))},[n(H,{class:"w-3 h-3 mr-1"}),J])):f("",!0)]),K,t("div",M,[n(d,{label:"access type",modelValue:e.access_type,"onUpdate:modelValue":a[1]||(a[1]=o=>e.access_type=o),name:"tpe.access_type",error:l.$page.props.errors["tpe.access_type"],options:r.access_types},null,8,["modelValue","error","options"]),n(d,{label:"access site coagulant",modelValue:e.access_site_coagulant,"onUpdate:modelValue":a[2]||(a[2]=o=>e.access_site_coagulant=o),name:"tpe.access_site_coagulant",error:l.$page.props.errors["tpe.access_site_coagulant"],options:e.access_type&&e.access_type.startsWith("AV")?r.av_access_sites:r.non_av_access_sites,disabled:!e.access_type||e.access_type==="pending"},null,8,["modelValue","error","options","disabled"]),n(d,{modelValue:e.dialyzer,"onUpdate:modelValue":a[3]||(a[3]=o=>e.dialyzer=o),name:"tpe.dialyzer",error:l.$page.props.errors["tpe.dialyzer"],label:"dialyzer",options:r.tpe_dialyzers},null,8,["modelValue","error","options"])]),Q,X,n(y,{modelValue:e.replacement_fluid_albumin,"onUpdate:modelValue":a[4]||(a[4]=o=>e.replacement_fluid_albumin=o),name:"tpe.replacement_fluid_albumin",label:"Albumin",class:"mt-2 md:mt-4",toggler:!0},null,8,["modelValue"]),n(v,{name:"slide-fade"},{default:b(()=>[e.replacement_fluid_albumin?(i(),p("div",Y,[t("div",null,[Z,n(x,{modelValue:e.replacement_fluid_albumin_concentrated,"onUpdate:modelValue":a[5]||(a[5]=o=>e.replacement_fluid_albumin_concentrated=o),name:"tpe.replacement_fluid_albumin_concentrated",error:l.$page.props.errors["tpe.replacement_fluid_albumin_concentrated"],class:"grid grid-cols-2 gap-2 md:gap-4",options:r.replacement_fluid_albumin_concentrated},null,8,["modelValue","error","options"])]),n(m,{modelValue:e.replacement_fluid_albumin_volume,"onUpdate:modelValue":a[6]||(a[6]=o=>e.replacement_fluid_albumin_volume=o),type:"tel",name:"tpe.replacement_fluid_albumin_volume",error:l.$page.props.errors["tpe.replacement_fluid_albumin_volume"],label:"volume (ml)"},null,8,["modelValue","error"])])):f("",!0)]),_:1}),n(y,{modelValue:e.replacement_fluid_ffp,"onUpdate:modelValue":a[7]||(a[7]=o=>e.replacement_fluid_ffp=o),name:"tpe.replacement_fluid_ffp",label:"FFP",class:"mt-2 md:mt-4",toggler:!0},null,8,["modelValue"]),n(v,{name:"slide-fade"},{default:b(()=>[e.replacement_fluid_ffp?(i(),D(m,{key:0,modelValue:e.replacement_fluid_ffp_volume,"onUpdate:modelValue":a[8]||(a[8]=o=>e.replacement_fluid_ffp_volume=o),type:"tel",name:"tpe.replacement_fluid_ffp_volume",error:l.$page.props.errors["tpe.replacement_fluid_ffp_volume"],label:"volume (ml)"},null,8,["modelValue","error"])):f("",!0)]),_:1}),n(F,{class:"my-2 md:my-4 xl:my-8",title:"Volume of exchange (l)",message:"[1.5-2.0] EPV, EPV = 0.065 x weight (kg) x (1-hct)."}),N,t("div",ee,[n(d,{modelValue:e.blood_pump,"onUpdate:modelValue":a[9]||(a[9]=o=>e.blood_pump=o),name:"tpe.blood_pump",error:l.$page.props.errors["tpe.blood_pump"],label:"blood pump (ml/min)",options:r.blood_pump},null,8,["modelValue","error","options"]),n(d,{modelValue:e.filtration_pump,"onUpdate:modelValue":a[10]||(a[10]=o=>e.filtration_pump=o),name:"tpe.filtration_pump",error:l.$page.props.errors["tpe.filtration_pump"],label:"filtration pump (%)",options:r.tpe_filtration_pump_options},null,8,["modelValue","error","options"]),n(d,{modelValue:e.replacement_pump,"onUpdate:modelValue":a[11]||(a[11]=o=>e.replacement_pump=o),name:"tpe.replacement_pump",error:l.$page.props.errors["tpe.replacement_pump"],label:"replacement pump (%)",options:r.tpe_replacement_pump_options},null,8,["modelValue","error","options"]),n(m,{modelValue:e.drain_pump,"onUpdate:modelValue":a[12]||(a[12]=o=>e.drain_pump=o),type:"tel",name:"tpe.drain_pump",error:l.$page.props.errors["tpe.drain_pump"],label:"drain pump (%)"},null,8,["modelValue","error"])]),ae,t("div",le,[t("div",null,[oe,n(x,{modelValue:e.calcium_gluconate_10_percent_volume,"onUpdate:modelValue":a[13]||(a[13]=o=>e.calcium_gluconate_10_percent_volume=o),class:q(["grid gap-2 md:gap-4",{"grid-cols-3":!e.calcium_gluconate_10_percent_volume,"grid-cols-2 sm:grid-cols-4":e.calcium_gluconate_10_percent_volume}]),name:"tpe.calcium_gluconate_10_percent_volume",error:l.$page.props.errors["tpe.calcium_gluconate_10_percent_volume"],options:r.calcium_gluconate_10_percent_volumes,"allow-reset":!0},null,8,["modelValue","class","error","options"])]),t("div",null,[ne,n(x,{modelValue:e.calcium_gluconate_10_percent_timing,"onUpdate:modelValue":a[14]||(a[14]=o=>e.calcium_gluconate_10_percent_timing=o),name:"tpe.calcium_gluconate_10_percent_timing",error:l.$page.props.errors["tpe.calcium_gluconate_10_percent_timing"],options:r.calcium_gluconate_10_percent_timings,"allow-reset":!0,class:q(["grid gap-2 md:gap-4 grid-cols-2",{"grid-cols-3":e.calcium_gluconate_10_percent_timing}])},null,8,["modelValue","error","options","class"])])]),re,t("div",te,[n(d,{modelValue:e.anticoagulant,"onUpdate:modelValue":a[15]||(a[15]=o=>e.anticoagulant=o),name:"tpe.anticoagulant",label:"anticoagulant",options:r.anticoagulants,ref_key:"anticoagulantInput",ref:z,error:l.$page.props.errors["tpe.anticoagulant"]},null,8,["modelValue","options","error"])]),n(v,{name:"slide-fade"},{default:b(()=>{var o,I,P,O;return[e.anticoagulant==="none"?(i(),p("div",se,[n(y,{label:"anticoagulant drip via peripheral IV",name:"anticoagulant_none_drip_via_peripheral_iv",modelValue:e.anticoagulant_none_drip_via_peripheral_iv,"onUpdate:modelValue":a[16]||(a[16]=s=>e.anticoagulant_none_drip_via_peripheral_iv=s)},null,8,["modelValue"]),n(y,{label:"NSS 200 ml flush q 1 hour",name:"anticoagulant_none_nss_200ml_flush_q_hour",modelValue:e.anticoagulant_none_nss_200ml_flush_q_hour,"onUpdate:modelValue":a[17]||(a[17]=s=>e.anticoagulant_none_nss_200ml_flush_q_hour=s)},null,8,["modelValue"])])):e.anticoagulant==="heparin"?(i(),p("div",ie,[t("div",pe,[n(m,{label:"loading dose (iu)",name:"tpe.heparin_loading_dose",modelValue:e.heparin_loading_dose,"onUpdate:modelValue":a[18]||(a[18]=s=>e.heparin_loading_dose=s),type:"number",pattern:"\\d*",onAutosave:a[19]||(a[19]=s=>g("heparin_loading_dose")),error:(o=u.heparin_loading_dose)!=null?o:l.$page.props.errors["tpe.heparin_loading_dose"],placeholder:`[${r.validators.heparin_loading_dose.min}, ${r.validators.heparin_loading_dose.max}] IU`},null,8,["modelValue","error","placeholder"]),n(m,{label:"maintenance dose (iu/hour)",name:"tpe.heparin_maintenance_dose",modelValue:e.heparin_maintenance_dose,"onUpdate:modelValue":a[20]||(a[20]=s=>e.heparin_maintenance_dose=s),type:"number",pattern:"\\d*",onAutosave:a[21]||(a[21]=s=>g("heparin_maintenance_dose")),error:(I=u.heparin_maintenance_dose)!=null?I:l.$page.props.errors["tpe.heparin_maintenance_dose"],placeholder:`[${r.validators.heparin_maintenance_dose.min}, ${r.validators.heparin_maintenance_dose.max}] IU/Hour`},null,8,["modelValue","error","placeholder"])]),n(F,{title:"Duration of maintenance (hours)",message:"DLC/PC uses duration of dialysis. AVF/AVG uses duration of dialysis - 1."})])):e.anticoagulant==="enoxaparin"?(i(),p("div",de,[n(m,{label:"dose (ml)",name:"tpe.enoxaparin_dose",modelValue:e.enoxaparin_dose,"onUpdate:modelValue":a[22]||(a[22]=s=>e.enoxaparin_dose=s),type:"number",onAutosave:a[23]||(a[23]=s=>g("enoxaparin_dose")),error:(P=u.enoxaparin_dose)!=null?P:l.$page.props.errors["tpe.enoxaparin_dose"],placeholder:`[${r.validators.enoxaparin_dose.min}, ${r.validators.enoxaparin_dose.max}] ml`},null,8,["modelValue","error","placeholder"])])):e.anticoagulant==="fondaparinux"?(i(),p("div",me,[n(d,{label:"bolus dose (iu)",name:"tpe.fondaparinux_bolus_dose",modelValue:e.fondaparinux_bolus_dose,"onUpdate:modelValue":a[24]||(a[24]=s=>e.fondaparinux_bolus_dose=s),options:r.fondaparinux_bolus_doses,error:l.$page.props.errors["tpe.fondaparinux_bolus_dose"]},null,8,["modelValue","options","error"])])):e.anticoagulant==="tinzaparin"?(i(),p("div",ue,[n(m,{label:"dose (iu)",name:"tpe.tinzaparin_dose",modelValue:e.tinzaparin_dose,"onUpdate:modelValue":a[25]||(a[25]=s=>e.tinzaparin_dose=s),type:"number",pattern:"\\d*",onAutosave:a[26]||(a[26]=s=>g("tinzaparin_dose")),error:(O=u.tinzaparin_dose)!=null?O:l.$page.props.errors["tpe.tinzaparin_dose"],placeholder:`[${r.validators.tinzaparin_dose.min}, ${r.validators.tinzaparin_dose.max}] IU`},null,8,["modelValue","error","placeholder"])])):f("",!0)]}),_:1}),n(S,{placeholder:E(c).placeholder,ref_key:"selectOtherInput",ref:k,onClosed:a[27]||(a[27]=o=>E(T)(o,!0))},null,8,["placeholder"])],64))}};export{xe as default};
