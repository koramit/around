import{r as m,h as l,c as o,g as d,b as n,t as v,p as y,u as g,d as w,e as k,F as S,l as V,m as C}from"./app-CpFhpPjS.js";import{t as B}from"./throttle-D7iU6sLh.js";const N={class:"relative"},z={class:"w-full"},F=["for"],T={class:"relative"},I=["id","name","value","disabled"],$={key:1,class:"text-red-700 mt-2 text-sm"},j=["onClick"],E={__name:"FormAutocomplete",props:{modelValue:{type:String,default:""},modelKey:{type:String,default:""},label:{type:String,default:""},endpoint:{type:String,default:""},params:{type:String,default:""},name:{type:String,required:!0},error:{type:String,default:""},lengthToStart:{type:Number,default:3},disabled:{type:Boolean}},emits:["update:modelValue","autosave"],setup(e,{emit:h}){const i=h,c=e,f=m([]),s=m(null),t=m(!1),p=B(function(){if(i("update:modelValue",s.value.value),s.value.value.length<c.lengthToStart){t.value&&(t.value=!1),s.value.value||i("autosave");return}window.axios.get(c.endpoint+"?search="+s.value.value+c.params).then(a=>{f.value=a.data.length?a.data:["No match found"],t.value=!0}).catch(a=>{console.log(a)})},300),b=a=>{s.value.value=a,t.value=!1,i("update:modelValue",a),i("autosave")};return(a,r)=>(l(),o("div",N,[t.value?(l(),o("div",{key:0,class:"fixed inset-0 z-10",onClick:r[0]||(r[0]=u=>t.value=!1)})):d("",!0),n("div",z,[e.label?(l(),o("label",{key:0,class:"form-label",for:e.name},v(e.label)+" : ",9,F)):d("",!0),n("div",T,[n("input",{type:"text",class:y(["form-input form-scroll-mt",{"!border-red-400 !text-red-400":e.error}]),onInput:r[1]||(r[1]=(...u)=>g(p)&&g(p)(...u)),id:e.name,name:e.name,ref_key:"input",ref:s,value:e.modelValue,disabled:e.disabled},null,42,I),r[2]||(r[2]=n("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2"},[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),e.error?(l(),o("div",$,v(e.error),1)):d("",!0)]),w(C,{name:"fade-appear"},{default:k(()=>[t.value?(l(),o("div",{key:0,class:y(["absolute mt-1 bg-white rounded border-2 border-yellow-200 shadow-xl w-full max-h-44 py-2 overflow-y-scroll z-20 origin-top",{"scale-100 opacity-100":t.value}])},[(l(!0),o(S,null,V(f.value,(u,x)=>(l(),o("button",{class:"block w-full py-1 px-2 lg:px-3 hover:bg-primary hover:text-accent text-left",key:x,onClick:q=>b(u)},v(u),9,j))),128))],2)):d("",!0)]),_:1})]))}};export{E as _};
