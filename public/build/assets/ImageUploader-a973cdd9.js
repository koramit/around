import{_ as p,h as a,c as n,b as s,r as m,t as _,k as v,g as u,d as h,e as g,T as L,I as x}from"./app-dd899f9b.js";import{I as w}from"./IconEyesSlash-ccffa868.js";import{I as V}from"./IconEyes-ac90fed7.js";const I={},H={viewBox:"0 0 512 512"},b=s("path",{fill:"currentColor",d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},null,-1),z=[b];function M(t,o){return a(),n("svg",H,z)}const B=p(I,[["render",M]]),E={},S={viewBox:"0 0 512 512"},N=s("path",{fill:"currentColor",d:"M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z"},null,-1),T=[N];function q(t,o){return a(),n("svg",S,T)}const D=p(E,[["render",q]]),G={},j={viewBox:"0 0 448 512"},F=s("path",{fill:"currentColor",d:"M143 207C152.4 197.7 167.6 197.7 176.1 207L223.1 254.1L271 207C280.4 197.7 295.6 197.7 304.1 207C314.3 216.4 314.3 231.6 304.1 240.1L257.9 287.1L304.1 335C314.3 344.4 314.3 359.6 304.1 368.1C295.6 378.3 280.4 378.3 271 368.1L223.1 321.9L176.1 368.1C167.6 378.3 152.4 378.3 143 368.1C133.7 359.6 133.7 344.4 143 335L190.1 287.1L143 240.1C133.7 231.6 133.7 216.4 143 207V207zM317.5 24.94L354.2 80H424C437.3 80 448 90.75 448 104C448 117.3 437.3 128 424 128H412.4L388.4 452.7C385.9 486.1 358.1 512 324.6 512H123.4C89.92 512 62.09 486.1 59.61 452.7L35.56 128H24C10.75 128 0 117.3 0 104C0 90.75 10.75 80 24 80H93.82L130.5 24.94C140.9 9.357 158.4 0 177.1 0H270.9C289.6 0 307.1 9.358 317.5 24.94V24.94zM151.5 80H296.5L277.5 51.56C276 49.34 273.5 48 270.9 48H177.1C174.5 48 171.1 49.34 170.5 51.56L151.5 80zM107.5 449.2C108.1 457.5 115.1 464 123.4 464H324.6C332.9 464 339.9 457.5 340.5 449.2L364.3 128H83.69L107.5 449.2z"},null,-1),O=[F];function U(t,o){return a(),n("svg",j,O)}const X=p(G,[["render",U]]),A={class:"flex items-center"},J={class:"form-label !mb-0 !inline"},K={key:2},P={key:0,class:"text-red-700 text-sm"},Q=["src"],Z={__name:"ImageUploader",props:{modelValue:{type:String,default:""},label:{type:String,required:!0},pathname:{type:String,required:!0},error:{type:String,default:""},readonly:{type:Boolean},serviceEndpoints:{type:Object,required:!0}},emits:["update:modelValue","autosave","removed"],setup(t,{emit:o}){const c=t,C=m(null),y=m(null),r=m(!1),i=m(!1),f=m(c.modelValue),k=d=>{i.value=!0;let e=new FormData;e.append("file",d.target.files[0]),e.append("pathname",c.pathname),e.append("old",c.modelValue),window.axios.post(c.serviceEndpoints.store,e).then(l=>{f.value=l.data.filename,o("update:modelValue",l.data.filename),o("autosave"),r.value||(r.value=!0)}).catch(l=>{console.log(l)}).finally(()=>{i.value=!1})};function $(){i.value=!0,r.value=!1,window.axios.delete(c.serviceEndpoints.destroy,{data:{path:c.pathname+"/"+c.modelValue}}).then(function(){f.value="",o("update:modelValue",""),o("autosave"),o("removed")}).catch(d=>{console.log(d)}).finally(()=>{i.value=!1})}return(d,e)=>(a(),n("div",null,[s("div",A,[s("p",null,[s("span",J,_(t.label),1),i.value?(a(),v(x,{key:0,class:"ml-1 w-4 h-4 inline-block opacity-25 animate-spin"})):u("",!0)]),t.readonly?u("",!0):(a(),n("button",{key:0,class:"ml-4",onClick:e[0]||(e[0]=l=>C.value.click())},[h(B,{class:"w-4 h-4 text-thick-theme-light"})])),t.readonly?u("",!0):(a(),n("button",{key:1,class:"ml-4",onClick:e[1]||(e[1]=l=>y.value.click())},[h(D,{class:"w-4 h-4 text-thick-theme-light"})])),t.modelValue?(a(),n("span",K,[s("button",{class:"ml-4",onClick:e[2]||(e[2]=l=>r.value=!r.value)},[r.value?(a(),v(w,{key:0,class:"w-4 h-4 text-dark-theme-light"})):(a(),v(V,{key:1,class:"w-4 h-4 text-dark-theme-light"}))]),t.serviceEndpoints.destroy!==void 0?(a(),n("button",{key:0,class:"ml-4",onClick:$},[h(X,{class:"w-4 h-4 text-red-400"})])):u("",!0)])):u("",!0)]),t.error?(a(),n("div",P,_(t.error),1)):u("",!0),h(L,{name:"slide-fade"},{default:g(()=>[t.modelValue!==void 0&&r.value?(a(),n("img",{key:0,src:`${t.serviceEndpoints.show}?path=${t.pathname}/${f.value}`,onLoadstart:e[3]||(e[3]=l=>i.value=!0),onLoad:e[4]||(e[4]=l=>d.$nextTick(()=>i.value=!1)),alt:""},null,40,Q)):u("",!0)]),_:1}),s("input",{class:"hidden",type:"file",ref_key:"useCamera",ref:C,onInput:k,capture:"environment",accept:"image/*"},null,544),s("input",{class:"hidden",type:"file",ref_key:"useGallery",ref:y,onInput:k,accept:"image/*"},null,544)]))}};export{X as I,Z as _};
