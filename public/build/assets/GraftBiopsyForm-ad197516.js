import{I as v}from"./CaseEdit-1de1b4ab.js";import{_ as $}from"./FormDatetime-94d714b3.js";import{_ as y}from"./FormCheckbox-e17ffef0.js";import{_ as U}from"./FormInput-90a1e0a7.js";import{_ as B,I as x}from"./ImageUploader-df77f125.js";import{r as C,z as F,b as i,c as d,F as p,m as c,d as l,e as n,t as _,k as I,n as k}from"./app-dd3bacbb.js";import"./FormAutocomplete-3eb3c3e0.js";import"./throttle-3a67ded0.js";import"./FormSelect-5dc8ce45.js";import"./FormRadio-bebd229e.js";import"./useSelectOther-c81468ab.js";import"./FormTextarea-aa4f06a2.js";import"./IconPaperclip-d2d040ce.js";import"./SpinnerButton-1601a823.js";import"./useConfirmForm-144edf77.js";import"./IconEyesSlash-fb9bca38.js";import"./IconEyes-193dbea2.js";const w={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8"},q={class:"space-y-2 md:space-y-4"},N={class:"form-label"},T=["id"],j={class:"mt-2 md:mt-4 grid grid-cols-2 gap-2 md:gap-4"},z=["onClick"],A=l("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1),ee={__name:"GraftBiopsyForm",props:{modelValue:{type:Array,required:!0},configs:{type:Object,required:!0}},emits:["update:modelValue","autosave"],setup(r,{emit:f}){const b=r,u=f,o=C([...b.modelValue]);F(()=>o.value,s=>{u("update:modelValue",[...s]),u("autosave")},{deep:!0});function g(s){let m=[...o.value];m.splice(s,1),o.value=[],k(()=>{o.value=m})}return(s,m)=>(i(),d("div",null,[(i(!0),d(p,null,c(o.value,(t,e)=>(i(),d("div",{key:e,class:"my-2 md:my-4 space-y-2 md:space-y-4"},[l("div",w,[l("div",q,[n($,{label:`date of biopsy#${e+1}`,name:`graft_biopsies.${e}.date_biopsy`,modelValue:t.date_biopsy,"onUpdate:modelValue":a=>t.date_biopsy=a,error:s.$page.props.errors["graft_biopsies."+e+".date_biopsy"]},null,8,["label","name","modelValue","onUpdate:modelValue","error"]),l("div",null,[l("label",N,"result biopsy#"+_(e+1)+" :",1),l("small",{class:"form-error-block form-scroll-mt",id:`graft_biopsies.${e}.result`},_(s.$page.props.errors[`graft_biopsies.${e}.result`]),9,T),l("div",j,[(i(!0),d(p,null,c(r.configs.biopsy_result_fields,(a,h)=>(i(),I(y,{key:h,label:a.label,name:`graft_biopsies.${e}.result.${a.name}`,modelValue:t.result[a.name],"onUpdate:modelValue":V=>t.result[a.name]=V},null,8,["label","name","modelValue","onUpdate:modelValue"]))),128))]),n(U,{class:"mt-2 md:mt-4",name:`graft_biopsies.${e}.result.other_result`,modelValue:t.result.other_result,"onUpdate:modelValue":a=>t.result.other_result=a,placeholder:"other result"},null,8,["name","modelValue","onUpdate:modelValue"])])]),n(B,{label:`attachment biopsy#${e+1}`,"service-endpoints":r.configs.routes.upload,pathname:r.configs.attachment_upload_pathname,modelValue:t.attachment,"onUpdate:modelValue":a=>t.attachment=a},null,8,["label","service-endpoints","pathname","modelValue","onUpdate:modelValue"]),l("button",{class:"block",onClick:a=>g(e)},[n(x,{class:"w-4 h-4 text-red-400"})],8,z)]),A]))),128)),l("button",{onClick:m[0]||(m[0]=t=>o.value.push({...r.configs.graft_biopsy}))},[n(v,{class:"w-4 h-4 text-accent"})])]))}};export{ee as default};
