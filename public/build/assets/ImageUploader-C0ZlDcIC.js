import{_ as C,h as a,c as n,b as o,r as f,t as L,j as p,g as u,d as v,e as w,m as V,I as $}from"./app-PCOXc-Hp.js";import{I}from"./IconEyesSlash-Tc0wwLcw.js";import{I as H}from"./IconEyes-B9idNutM.js";const b={},z={viewBox:"0 0 512 512"};function M(t,l){return a(),n("svg",z,l[0]||(l[0]=[o("path",{fill:"currentColor",d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},null,-1)]))}const _=C(b,[["render",M]]),B={},E={viewBox:"0 0 512 512"};function S(t,l){return a(),n("svg",E,l[0]||(l[0]=[o("path",{fill:"currentColor",d:"M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z"},null,-1)]))}const N=C(B,[["render",S]]),q={},T={viewBox:"0 0 448 512"};function j(t,l){return a(),n("svg",T,l[0]||(l[0]=[o("path",{fill:"currentColor",d:"M143 207C152.4 197.7 167.6 197.7 176.1 207L223.1 254.1L271 207C280.4 197.7 295.6 197.7 304.1 207C314.3 216.4 314.3 231.6 304.1 240.1L257.9 287.1L304.1 335C314.3 344.4 314.3 359.6 304.1 368.1C295.6 378.3 280.4 378.3 271 368.1L223.1 321.9L176.1 368.1C167.6 378.3 152.4 378.3 143 368.1C133.7 359.6 133.7 344.4 143 335L190.1 287.1L143 240.1C133.7 231.6 133.7 216.4 143 207V207zM317.5 24.94L354.2 80H424C437.3 80 448 90.75 448 104C448 117.3 437.3 128 424 128H412.4L388.4 452.7C385.9 486.1 358.1 512 324.6 512H123.4C89.92 512 62.09 486.1 59.61 452.7L35.56 128H24C10.75 128 0 117.3 0 104C0 90.75 10.75 80 24 80H93.82L130.5 24.94C140.9 9.357 158.4 0 177.1 0H270.9C289.6 0 307.1 9.358 317.5 24.94V24.94zM151.5 80H296.5L277.5 51.56C276 49.34 273.5 48 270.9 48H177.1C174.5 48 171.1 49.34 170.5 51.56L151.5 80zM107.5 449.2C108.1 457.5 115.1 464 123.4 464H324.6C332.9 464 339.9 457.5 340.5 449.2L364.3 128H83.69L107.5 449.2z"},null,-1)]))}const D=C(q,[["render",j]]),G={class:"flex items-center"},F={class:"form-label !mb-0 !inline"},O={key:2},U={key:0,class:"text-red-700 text-sm"},X=["src"],P={__name:"ImageUploader",props:{modelValue:{type:String,default:""},label:{type:String,required:!0},pathname:{type:String,required:!0},error:{type:String,default:""},readonly:{type:Boolean},serviceEndpoints:{type:Object,required:!0}},emits:["update:modelValue","autosave","removed"],setup(t,{emit:l}){const d=l,r=t,y=f(null),k=f(null),i=f(!1),c=f(!1),h=f(r.modelValue),g=m=>{c.value=!0;let e=new FormData;e.append("file",m.target.files[0]),e.append("pathname",r.pathname),e.append("old",r.modelValue),window.axios.post(r.serviceEndpoints.store,e).then(s=>{h.value=s.data.filename,d("update:modelValue",s.data.filename),d("autosave"),i.value||(i.value=!0)}).catch(s=>{console.log(s)}).finally(()=>{c.value=!1})};function x(){c.value=!0,i.value=!1,window.axios.delete(r.serviceEndpoints.destroy,{data:{path:r.pathname+"/"+r.modelValue}}).then(function(){h.value="",d("update:modelValue",""),d("autosave"),d("removed")}).catch(m=>{console.log(m)}).finally(()=>{c.value=!1})}return(m,e)=>(a(),n("div",null,[o("div",G,[o("p",null,[o("span",F,L(t.label),1),c.value?(a(),p($,{key:0,class:"ml-1 w-4 h-4 inline-block opacity-25 animate-spin"})):u("",!0)]),t.readonly?u("",!0):(a(),n("button",{key:0,class:"ml-4",onClick:e[0]||(e[0]=s=>y.value.click())},[v(_,{class:"w-4 h-4 text-thick-theme-light"})])),t.readonly?u("",!0):(a(),n("button",{key:1,class:"ml-4",onClick:e[1]||(e[1]=s=>k.value.click())},[v(N,{class:"w-4 h-4 text-thick-theme-light"})])),t.modelValue?(a(),n("span",O,[o("button",{class:"ml-4",onClick:e[2]||(e[2]=s=>i.value=!i.value)},[i.value?(a(),p(I,{key:0,class:"w-4 h-4 text-dark-theme-light"})):(a(),p(H,{key:1,class:"w-4 h-4 text-dark-theme-light"}))]),t.serviceEndpoints.destroy!==void 0?(a(),n("button",{key:0,class:"ml-4",onClick:x},[v(D,{class:"w-4 h-4 text-red-400"})])):u("",!0)])):u("",!0)]),t.error?(a(),n("div",U,L(t.error),1)):u("",!0),v(V,{name:"slide-fade"},{default:w(()=>[t.modelValue!==void 0&&i.value?(a(),n("img",{key:0,src:`${t.serviceEndpoints.show}?path=${t.pathname}/${h.value}`,onLoadstart:e[3]||(e[3]=s=>c.value=!0),onLoad:e[4]||(e[4]=s=>m.$nextTick(()=>c.value=!1)),alt:""},null,40,X)):u("",!0)]),_:1}),o("input",{class:"hidden",type:"file",ref_key:"useCamera",ref:y,onInput:g,capture:"environment",accept:"image/*"},null,544),o("input",{class:"hidden",type:"file",ref_key:"useGallery",ref:k,onInput:g,accept:"image/*"},null,544)]))}};export{D as I,P as _};
