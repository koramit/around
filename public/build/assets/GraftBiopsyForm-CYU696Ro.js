import{I as v}from"./IconFileCirclePlus-CJguqhwE.js";import{_ as $}from"./FormDatetime-CD7PnGMk.js";import{_ as y}from"./FormCheckbox-DtalXC8O.js";import{_ as U}from"./FormInput-CeodDT4X.js";import{_ as B}from"./ImageUploader-CvOv_YiW.js";import{I as x}from"./IconTrashXMark-BNt-In9c.js";import{r as C,v as F,h as n,c as u,F as c,l as p,b as t,d,t as _,j as I,n as w}from"./app-DaBT_1QS.js";import"./IconEyesSlash-CzAiS1U1.js";import"./IconEyes-DiWvcYId.js";const j={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8"},k={class:"space-y-2 md:space-y-4"},q={class:"form-label"},N=["id"],T={class:"mt-2 md:mt-4 grid grid-cols-2 gap-2 md:gap-4"},A=["onClick"],z={__name:"GraftBiopsyForm",props:{modelValue:{type:Array,required:!0},configs:{type:Object,required:!0}},emits:["update:modelValue","autosave"],setup(m,{emit:f}){const b=m,i=f,o=C([...b.modelValue]);F(()=>o.value,r=>{i("update:modelValue",[...r]),i("autosave")},{deep:!0});function g(r){let s=[...o.value];s.splice(r,1),o.value=[],w(()=>{o.value=s})}return(r,s)=>(n(),u("div",null,[(n(!0),u(c,null,p(o.value,(l,e)=>(n(),u("div",{key:e,class:"my-2 md:my-4 space-y-2 md:space-y-4"},[t("div",j,[t("div",k,[d($,{label:`date of biopsy#${e+1}`,name:`graft_biopsies.${e}.date_biopsy`,modelValue:l.date_biopsy,"onUpdate:modelValue":a=>l.date_biopsy=a,error:r.$page.props.errors["graft_biopsies."+e+".date_biopsy"]},null,8,["label","name","modelValue","onUpdate:modelValue","error"]),t("div",null,[t("label",q,"result biopsy#"+_(e+1)+" :",1),t("small",{class:"form-error-block form-scroll-mt",id:`graft_biopsies.${e}.result`},_(r.$page.props.errors[`graft_biopsies.${e}.result`]),9,N),t("div",T,[(n(!0),u(c,null,p(m.configs.biopsy_result_fields,(a,h)=>(n(),I(y,{key:h,label:a.label,name:`graft_biopsies.${e}.result.${a.name}`,modelValue:l.result[a.name],"onUpdate:modelValue":V=>l.result[a.name]=V},null,8,["label","name","modelValue","onUpdate:modelValue"]))),128))]),d(U,{class:"mt-2 md:mt-4",name:`graft_biopsies.${e}.result.other_result`,modelValue:l.result.other_result,"onUpdate:modelValue":a=>l.result.other_result=a,placeholder:"other result"},null,8,["name","modelValue","onUpdate:modelValue"])])]),d(B,{label:`attachment biopsy#${e+1}`,"service-endpoints":m.configs.routes.upload,pathname:m.configs.attachment_upload_pathname,modelValue:l.attachment,"onUpdate:modelValue":a=>l.attachment=a},null,8,["label","service-endpoints","pathname","modelValue","onUpdate:modelValue"]),t("button",{class:"block",onClick:a=>g(e)},[d(x,{class:"w-4 h-4 text-red-400"})],8,A)]),s[1]||(s[1]=t("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1))]))),128)),t("button",{onClick:s[0]||(s[0]=l=>o.value.push({...m.configs.graft_biopsy}))},[d(v,{class:"w-4 h-4 text-accent"})])]))}};export{z as default};
