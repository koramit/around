import{a6 as F,o as s,c as o,b as t,F as c,d as l,a as i,u as k,a8 as j,j as p,t as r,s as _,w as y,H as A,f as q}from"./app.2f152dff.js";import{u as H}from"./useConfirmForm.236309da.js";import{_ as b,I as L,a as B}from"./IconDoubleDown.5468f937.js";import{I as D}from"./IconUserMd.b8a539ec.js";import{_ as I}from"./PaginationNav.29a67de2.js";const M={class:"bg-white rounded shadow overflow-x-auto hidden md:block"},N={class:"w-full whitespace-nowrap"},T={class:"text-left font-semibold text-complement"},O=["textContent","colspan"],S=["textContent"],V={class:"border-t"},E={key:1,class:"p-2 flex justify-center items-center"},R=["innerHTML"],$={class:"md:hidden"},P={class:"flex justify-between items-center my-2 px-2"},U={class:"bg-primary-darker p-2 rounded-full"},z={class:"my-2 p-2 bg-gray-100 rounded space-y-2"},G={class:"flex justify-between items-center"},J=["innerHTML"],K={class:"font-semibold text-complement text-xs flex items-center"},Q={class:"block italic truncate"},W={class:"flex justify-center items-center"},X={class:"italic text-center w-full"},ne={__name:"SlotRequestIndex",props:{requests:{type:Object,required:!0},configs:{type:Object,required:!0},endpoints:{type:Object,required:!0}},setup(d){const x=F(()=>j(()=>import("./ConfirmFormComposable.9018bb86.js"),["assets/ConfirmFormComposable.9018bb86.js","assets/FormInput.55b609c4.js","assets/app.2f152dff.js","assets/app.333ef45f.css","assets/SpinnerButton.020f3bed.js","assets/ModalDialog.ba59768b.js","assets/ModalDialog.7d4de9ea.css"])),{confirmForm:v,openConfirmForm:w,confirmed:C}=H();let a=null;const u=n=>{switch(n.name){case"approve-request":p({approve:!0}).patch(n.route);break;case"disapprove-request":case"cancel-request":w(n.config),a={...n};break;default:return}},g=n=>{switch(a.name){case"disapprove-request":p({approve:!1,reason:n}).patch(a.route,{preserveState:!1,onFinish:()=>a=null});break;case"cancel-request":p({reason:n}).delete(a.route,{preserveState:!1,onFinish:()=>a=null});break;default:return}};return(n,f)=>(s(),o("div",null,[t("div",M,[t("table",N,[t("tr",T,[(s(),o(c,null,l(["HN","Name","Request","By"],e=>t("th",{class:"px-6 pt-6 pb-4",key:e,textContent:r(e),colspan:e==="MD"?2:1},null,8,O)),64))]),(s(!0),o(c,null,l(d.requests.data,(e,m)=>(s(),o("tr",{class:"focus-within:bg-primary-darker",key:m},[(s(),o(c,null,l(["hn","patient_name","request","requester"],h=>t("td",{class:"px-6 py4 border-t",key:h,textContent:r(e[h])},null,8,S)),64)),t("td",V,[e.actions.length?(s(),_(b,{key:0,actions:e.actions,onActionClicked:u},null,8,["actions"])):(s(),o("div",E,[t("span",{innerHTML:e.status},null,8,R)]))])]))),128))])]),t("div",$,[(s(!0),o(c,null,l(d.requests.data,(e,m)=>(s(),o("div",{class:"bg-white rounded shadow my-4 p-4",key:m},[t("div",P,[t("div",null," HN: "+r(e.hn)+" "+r(e.patient_name),1),e.actions.length>1?(s(),_(A,{key:0},{default:y(()=>[t("div",U,[i(L,{class:"w-4 h-4 text-accent"})])]),dropdown:y(()=>[i(B,{actions:e.actions,onActionClicked:u},null,8,["actions"])]),_:2},1024)):e.actions.length===1?(s(),_(b,{key:1,actions:e.actions,onActionClicked:u},null,8,["actions"])):q("",!0)]),t("div",z,[t("div",G,[t("span",{innerHTML:e.status},null,8,J),t("p",K,[i(D,{class:"h-3 w-3 mr-1"}),t("span",Q,r(e.requester),1)])]),t("div",W,[t("p",X,r(e.request),1)])])]))),128))]),i(I,{links:d.requests.links},null,8,["links"]),i(k(x),{ref_key:"confirmForm",ref:v,onConfirmed:f[0]||(f[0]=e=>k(C)(e,g))},null,512)]))}};export{ne as default};
