import{y as D,r as y,l as S,o as V,c as n,b as e,d as o,g as k,F as d,m,u as C,v as w,h as s,t as c,k as v,e as g,E,f as x,B as L}from"./app-00136641.js";import{_ as P}from"./SearchIndex-a0555f82.js";import{_ as F}from"./NoteStatusBadge-2d15fb86.js";import{_ as A,I as T,a as M}from"./IconDoubleDown-70db0384.js";import{u as z}from"./useConfirmForm-9ac2cca5.js";import{_ as G}from"./PaginationNav-32a13afc.js";import H from"./ConfirmFormComposable-1ef2d619.js";import"./pickBy-bae3b060.js";import"./throttle-b75422b4.js";import"./FormInput-9911fc5d.js";import"./SpinnerButton-9aeefe04.js";import"./ModalDialog-b4aac9ec.js";const J={class:"flex flex-col-reverse md:flex-row justify-between items-center mb-4"},K={class:"bg-white rounded shadow overflow-x-auto hidden md:block"},Q={class:"w-full whitespace-nowrap"},U={class:"text-left font-semibold text-complement"},W=["textContent","colspan"],X={key:0,class:"px-6 py-4 border-t"},Y=["textContent"],Z={class:"border-t"},R={class:"flex justify-between items-center"},tt={class:"md:hidden"},et={class:"flex justify-between items-center my-2 px-2"},st={class:"bg-primary-darker p-2 rounded-full"},nt={class:"my-2 p-2 bg-gray-100 rounded space-y-2"},ot={class:"flex items-center justify-between"},at={class:"font-semibold text-complement text-xs flex items-center"},rt={class:"block py-2 px-1 italic truncate"},it={class:"flex items-center justify-between text-xs"},ct=["textContent"],lt=["textContent"],dt=["textContent"],vt={__name:"CaseIndex",props:{caseRecords:{type:Object,required:!0},configs:{type:Object,required:!0},filters:{type:Object,required:!0},routes:{type:Object,required:!0},can:{type:Object,required:!0}},setup(a){const u=a,j=D(()=>L(()=>import("./CreateForm-80b8ed4e.js"),["assets/CreateForm-80b8ed4e.js","assets/app-00136641.js","assets/app-34900f54.css","assets/ModalDialog-b4aac9ec.js","assets/ModalDialog-10546d4c.css","assets/FormInput-9911fc5d.js","assets/SpinnerButton-9aeefe04.js","assets/FormRadio-b3ce9fa4.js"])),O=y(null),f=S({search:u.filters.search,scope:u.filters.scope}),b=y(null);function $(i){w(i).post(u.routes.store)}let l=null;const p=i=>{switch(l={...i},l.name){case"destroy-case":case"cancel-case":q(l.config);break}},N=i=>{switch(l.name){case"destroy-case":case"cancel-case":w({reason:i}).delete(l.route,{onFinish:()=>l=null});break}},{confirmForm:I,openConfirmForm:q,confirmed:B}=z();return V(()=>b.value.focus()),(i,r)=>(s(),n(d,null,[e("div",J,[o(P,{scopes:a.configs.scopes,form:f,onSearchChanged:r[0]||(r[0]=t=>f.search=t),onScopeChanged:r[1]||(r[1]=t=>f.scope=t),ref_key:"searchInput",ref:b},null,8,["scopes","form"]),a.can.create?(s(),n("button",{key:0,class:"btn btn-accent w-full mb-4 md:w-auto md:px-4 md:mb-0",onClick:r[2]||(r[2]=t=>i.$refs.createFormRef.open())}," New Case ")):k("",!0)]),e("div",K,[e("table",Q,[e("tr",U,[(s(),n(d,null,m(["AN","Patient","Reason","Admitted On","Status","Author"],t=>e("th",{class:"px-6 pt-6 pb-4",key:t,textContent:c(t),colspan:t==="Author"?2:1},null,8,W)),64))]),(s(!0),n(d,null,m(a.caseRecords.data,(t,_)=>(s(),n("tr",{class:"focus-within:bg-primary-darker",key:_},[(s(),n(d,null,m(["an","patient","reason","admitted_at","status","author"],h=>(s(),n(d,{key:h},[h==="status"?(s(),n("td",X,[o(F,{status:t.status},null,8,["status"])])):(s(),n("td",{key:1,class:"px-6 py-4 border-t",textContent:c(t[h])},null,8,Y))],64))),64)),e("td",Z,[e("div",R,[o(A,{actions:t.actions,onActionClicked:p},null,8,["actions"])])])]))),128))])]),e("div",tt,[(s(!0),n(d,null,m(a.caseRecords.data,(t,_)=>(s(),n("div",{class:"bg-white rounded shadow my-4 p-4",key:_},[e("div",et,[e("div",null,c(t.patient),1),t.actions.length>1?(s(),v(E,{key:0},{default:g(()=>[e("div",st,[o(T,{class:"w-4 h-4 text-accent"})])]),dropdown:g(()=>[o(M,{actions:t.actions,onActionClicked:p},null,8,["actions"])]),_:2},1024)):t.actions.length===1?(s(),v(A,{key:1,actions:t.actions,onActionClicked:p},null,8,["actions"])):k("",!0)]),e("div",nt,[e("div",ot,[o(F,{status:t.status},null,8,["status"]),e("p",at,[e("span",rt,c(t.author),1)])]),e("div",it,[e("p",null,[x(" AN : "),e("span",{class:"text-complement font-semibold",textContent:c(t.an)},null,8,ct)]),e("p",null,[x(" Reason: "),e("span",{class:"text-complement font-semibold px-1",textContent:c(t.reason)},null,8,lt)]),e("p",null,[x(" On : "),e("span",{class:"text-complement font-semibold",textContent:c(t.admitted_at)},null,8,dt)])])])]))),128))]),o(G,{links:a.caseRecords.links},null,8,["links"]),o(C(j),{"service-endpoint":a.routes.admissionsShow,"admit-reasons":a.configs.admit_reasons,ref_key:"createFormRef",ref:O,onConfirmed:$},null,8,["service-endpoint","admit-reasons"]),o(H,{ref_key:"confirmForm",ref:I,onConfirmed:r[3]||(r[3]=t=>C(B)(t,N))},null,512)],64))}};export{vt as default};
