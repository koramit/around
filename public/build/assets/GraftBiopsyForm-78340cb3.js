import{I as h}from"./CaseEdit-d68ccead.js";import{_ as V}from"./FormDatetime-b6c47c13.js";import{_ as v}from"./FormCheckbox-dc0d4696.js";import{_ as $}from"./FormInput-084b806e.js";import{_ as y,I as U}from"./ImageUploader-f934fffa.js";import{r as B,z as x,b as n,c as d,F as p,m as c,d as l,e as i,t as _,k as C,n as F}from"./app-4c4070f2.js";import"./FormAutocomplete-f39e82fb.js";import"./throttle-e5d15860.js";import"./FormSelect-7383a74e.js";import"./FormRadio-c474b0ab.js";import"./useSelectOther-bb243131.js";import"./FormTextarea-540cf4e4.js";import"./IconPaperclip-48a97bc0.js";import"./SpinnerButton-91e436ba.js";import"./useConfirmForm-66b42655.js";import"./IconEyesSlash-3b57b523.js";import"./IconEyes-370e5007.js";const I={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8"},k={class:"space-y-2 md:space-y-4"},w={class:"form-label"},q=["id"],N={class:"mt-2 md:mt-4 grid grid-cols-2 gap-2 md:gap-4"},T=["onClick"],j=l("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1),Z={__name:"GraftBiopsyForm",props:{modelValue:{type:Array,required:!0},configs:{type:Object,required:!0}},emits:["update:modelValue","autosave"],setup(r,{emit:u}){const o=B([...r.modelValue]);x(()=>o.value,s=>{u("update:modelValue",[...s]),u("autosave")},{deep:!0});function f(s){let m=[...o.value];m.splice(s,1),o.value=[],F(()=>{o.value=m})}return(s,m)=>(n(),d("div",null,[(n(!0),d(p,null,c(o.value,(t,e)=>(n(),d("div",{key:e,class:"my-2 md:my-4 space-y-2 md:space-y-4"},[l("div",I,[l("div",k,[i(V,{label:`date of biopsy#${e+1}`,name:`graft_biopsies.${e}.date_biopsy`,modelValue:t.date_biopsy,"onUpdate:modelValue":a=>t.date_biopsy=a,error:s.$page.props.errors["graft_biopsies."+e+".date_biopsy"]},null,8,["label","name","modelValue","onUpdate:modelValue","error"]),l("div",null,[l("label",w,"result biopsy#"+_(e+1)+" :",1),l("small",{class:"form-error-block form-scroll-mt",id:`graft_biopsies.${e}.result`},_(s.$page.props.errors[`graft_biopsies.${e}.result`]),9,q),l("div",N,[(n(!0),d(p,null,c(r.configs.biopsy_result_fields,(a,b)=>(n(),C(v,{key:b,label:a.label,name:`graft_biopsies.${e}.result.${a.name}`,modelValue:t.result[a.name],"onUpdate:modelValue":g=>t.result[a.name]=g},null,8,["label","name","modelValue","onUpdate:modelValue"]))),128))]),i($,{class:"mt-2 md:mt-4",name:`graft_biopsies.${e}.result.other_result`,modelValue:t.result.other_result,"onUpdate:modelValue":a=>t.result.other_result=a,placeholder:"other result"},null,8,["name","modelValue","onUpdate:modelValue"])])]),i(y,{label:`attachment biopsy#${e+1}`,"service-endpoints":r.configs.routes.upload,pathname:r.configs.attachment_upload_pathname,modelValue:t.attachment,"onUpdate:modelValue":a=>t.attachment=a},null,8,["label","service-endpoints","pathname","modelValue","onUpdate:modelValue"]),l("button",{class:"block",onClick:a=>f(e)},[i(U,{class:"w-4 h-4 text-red-400"})],8,T)]),j]))),128)),l("button",{onClick:m[0]||(m[0]=t=>o.value.push({...r.configs.graft_biopsy}))},[i(h,{class:"w-4 h-4 text-accent"})])]))}};export{Z as default};
