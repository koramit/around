import{g as r,E as w,o as n,c as a,a as t,F as c,v as d,t as i,q as _,w as b,b as f,K as g,i as C,M as o}from"./app.38c78e85.js";import{I as q}from"./IconUserMd.7fd7b247.js";import{_ as k,I as M,a as j}from"./ActionDropdown.c709c9c4.js";const A={class:"bg-white rounded shadow overflow-x-auto hidden md:block"},D={class:"w-full whitespace-nowrap"},E={class:"text-left font-semibold text-complement"},H=["textContent","colspan"],L=["textContent"],N={class:"border-t"},R={key:1,class:"p-2 flex justify-center items-center"},T=["innerHTML"],B={class:"md:hidden"},F={class:"flex justify-between items-center my-2 px-2"},I={class:"bg-primary-darker p-2 rounded-full"},S={class:"my-2 p-2 bg-gray-100 rounded space-y-2"},V={class:"flex justify-between items-center"},O=["innerHTML"],$={class:"font-semibold text-complement text-xs flex items-center"},K={class:"block italic truncate"},P={class:"flex justify-center items-center"},U={class:"italic text-center w-full"},W={__name:"SlotRequestIndex",props:{requests:{type:Array,required:!0},configs:{type:Object,required:!0},endpoints:{type:Object,required:!0}},setup(h){r({case:null,dialysis_type:null,dialysis_at:null,attending_staff:null,date_note:null,patient_type:null});const m=s=>{o().props.value.event.name="confirmation-required",o().props.value.event.payload=s,o().props.value.event.fire=+new Date},u=s=>{s.callback==="approve-request"?r({approve:!0}).patch(s.href):s.callback==="disapprove-request"?(l={...s},m({heading:s.confirm_heading,confirmText:s.confirm_text,confirmedEvent:v,requireReason:!0})):s.callback==="cancel-request"&&(l={...s},m({heading:s.confirm_heading,confirmText:s.confirm_text,confirmedEvent:y,requireReason:!0}))},v="disapprove-acute-hemodialysis-slot-request",y="cancel-acute-hemodialysis-slot-request";let l;return w(()=>o().props.value.event.fire,s=>{!s||(o().props.value.event.name===v?r({approve:!1,reason:o().props.value.event.payload}).patch(l.href,{preserveState:!1,onFinish:()=>l=null}):o().props.value.event.name===y&&r({reason:o().props.value.event.payload}).delete(l.href,{preserveState:!1,onFinish:()=>l=null}))}),(s,z)=>(n(),a("div",null,[t("div",A,[t("table",D,[t("tr",E,[(n(),a(c,null,d(["HN","Name","Request","By"],e=>t("th",{class:"px-6 pt-6 pb-4",key:e,textContent:i(e),colspan:e==="MD"?2:1},null,8,H)),64))]),(n(!0),a(c,null,d(h.requests,(e,p)=>(n(),a("tr",{class:"focus-within:bg-primary-darker",key:p},[(n(),a(c,null,d(["hn","patient_name","request","requester"],x=>t("td",{class:"px-6 py4 border-t",key:x,textContent:i(e[x])},null,8,L)),64)),t("td",N,[e.actions.length?(n(),_(k,{key:0,actions:e.actions,onActionClicked:u},null,8,["actions"])):(n(),a("div",R,[t("span",{innerHTML:e.status},null,8,T)]))])]))),128))])]),t("div",B,[(n(!0),a(c,null,d(h.requests,(e,p)=>(n(),a("div",{class:"bg-white rounded shadow my-4 p-4",key:p},[t("div",F,[t("div",null," HN: "+i(e.hn)+" "+i(e.patient_name),1),e.actions.length>1?(n(),_(g,{key:0},{default:b(()=>[t("div",I,[f(M,{class:"w-4 h-4 text-accent"})])]),dropdown:b(()=>[f(j,{actions:e.actions,onActionClicked:u},null,8,["actions"])]),_:2},1024)):e.actions.length===1?(n(),_(k,{key:1,actions:e.actions,onActionClicked:u},null,8,["actions"])):C("",!0)]),t("div",S,[t("div",V,[t("span",{innerHTML:e.status},null,8,O),t("p",$,[f(q,{class:"h-3 w-3 mr-1"}),t("span",K,i(e.requester),1)])]),t("div",P,[t("p",U,i(e.request),1)])])]))),128))])]))}};export{W as default};
