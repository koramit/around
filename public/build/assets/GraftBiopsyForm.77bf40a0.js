import{I as h}from"./CaseEdit.ff1f28d6.js";import{_ as V}from"./FormDatetime.e4a86415.js";import{_ as v}from"./FormCheckbox.1a038347.js";import{_ as $}from"./FormInput.aa0921f7.js";import{_ as y,I as U}from"./ImageUploader.07cc31f9.js";import{r as B,E as x,o as i,c as d,F as p,d as c,b as l,a as n,t as _,v as C,j as F}from"./app.c49ecac0.js";import"./FormAutocomplete.5f5eb17f.js";import"./throttle.6f7722ce.js";import"./FormSelect.66c7f9f9.js";import"./FormRadio.7679d42d.js";import"./useSelectOther.ec237014.js";import"./FormTextarea.2c043e11.js";import"./IconPaperclip.e28c3335.js";import"./SpinnerButton.fe2730dd.js";import"./useConfirmForm.9374150e.js";import"./IconEyesSlash.fea72fed.js";import"./IconEyes.fcffdc4d.js";const I={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8"},w={class:"space-y-2 md:space-y-4"},j={class:"form-label"},k=["id"],q={class:"mt-2 md:mt-4 grid grid-cols-2 gap-2 md:gap-4"},E=["onClick"],N=l("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1),Z={__name:"GraftBiopsyForm",props:{modelValue:{type:Array,required:!0},configs:{type:Object,required:!0}},emits:["update:modelValue","autosave"],setup(r,{emit:u}){const o=B([...r.modelValue]);x(()=>o.value,s=>{u("update:modelValue",[...s]),u("autosave")},{deep:!0});function f(s){let m=[...o.value];m.splice(s,1),o.value=[],F(()=>{o.value=m})}return(s,m)=>(i(),d("div",null,[(i(!0),d(p,null,c(o.value,(t,e)=>(i(),d("div",{key:e,class:"my-2 md:my-4 space-y-2 md:space-y-4"},[l("div",I,[l("div",w,[n(V,{label:`date of biopsy#${e+1}`,name:`graft_biopsies.${e}.date_biopsy`,modelValue:t.date_biopsy,"onUpdate:modelValue":a=>t.date_biopsy=a,error:s.$page.props.errors["graft_biopsies."+e+".date_biopsy"]},null,8,["label","name","modelValue","onUpdate:modelValue","error"]),l("div",null,[l("label",j,"result biopsy#"+_(e+1)+" :",1),l("small",{class:"form-error-block form-scroll-mt",id:`graft_biopsies.${e}.result`},_(s.$page.props.errors[`graft_biopsies.${e}.result`]),9,k),l("div",q,[(i(!0),d(p,null,c(r.configs.biopsy_result_fields,(a,b)=>(i(),C(v,{key:b,label:a.label,name:`graft_biopsies.${e}.result.${a.name}`,modelValue:t.result[a.name],"onUpdate:modelValue":g=>t.result[a.name]=g},null,8,["label","name","modelValue","onUpdate:modelValue"]))),128))]),n($,{class:"mt-2 md:mt-4",name:`graft_biopsies.${e}.result.other_result`,modelValue:t.result.other_result,"onUpdate:modelValue":a=>t.result.other_result=a,placeholder:"other result"},null,8,["name","modelValue","onUpdate:modelValue"])])]),n(y,{label:`attachment biopsy#${e+1}`,"service-endpoints":r.configs.routes.upload,pathname:r.configs.attachment_upload_pathname,modelValue:t.attachment,"onUpdate:modelValue":a=>t.attachment=a},null,8,["label","service-endpoints","pathname","modelValue","onUpdate:modelValue"]),l("button",{class:"block",onClick:a=>f(e)},[n(U,{class:"w-4 h-4 text-red-400"})],8,E)]),N]))),128)),l("button",{onClick:m[0]||(m[0]=t=>o.value.push({...r.configs.graft_biopsy}))},[n(h,{class:"w-4 h-4 text-accent"})])]))}};export{Z as default};
