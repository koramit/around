import{r as f,x as _,o as l,v as T,a as i,w as d,b as t,l as A,e as k,c as r,n as B,F as w,d as g,t as y,T as E,f as K,aa as N,j as S}from"./app.a0bb8a56.js";import{M as $}from"./ModalDialog.0c0dc9ef.js";import{_ as F}from"./FormInput.4007528d.js";import{_ as R}from"./SpinnerButton.bb203049.js";import{_ as D}from"./FormRadio.10f5c06b.js";const I=t("div",{class:"font-semibold text-complement"}," Search Admission ",-1),M={class:"py-4 my-2 md:py-6 md:my-4 border-t border-b border-accent-darker"},U=t("hr",{class:"my-4 md:my-6"},null,-1),q=t("span",{class:"form-label block"},"admission data",-1),z={class:"bg-gray-100 text-gray-100 whitespace-nowrap"},H={key:1,class:"bg-white rounded shadow p-2 lg:p-4 text-sm"},L={class:"text-complement uppercase font-semibold"},G={key:0},J=t("hr",{class:"my-4 md:my-6"},null,-1),P={class:"flex justify-end items-center"},Q=["disabled"],ae={__name:"CreateForm",props:{serviceEndpoint:{type:String,required:!0},admitReasons:{type:Array,default:()=>["KT","Complication"]}},emits:["confirmed"],setup(b,{expose:x,emit:C}){const V=b,c=f(null),h=f(null),m=f(!1),n=_({an:null,hn:null,reason_for_admission:null}),e=_({an:null,hn:null,name:null,gender:null,age:null,ward_admit:null,admitted_at:null,discharged_at:null}),u=_({an:null});function v(){m.value=!0,u.an=null,Object.keys(e).map(s=>e[s]=null),window.axios.post(V.serviceEndpoint,{key:n.an}).then(s=>{if(!s.data.found){u.an=s.data.message;return}Object.keys(e).map(o=>e[o]=s.data[o])}).catch(s=>{console.log(s)}).finally(()=>{m.value=!1})}function j(){c.value.open(),Object.keys(e).map(s=>e[s]=null),S(()=>h.value.focus())}function O(){n.an=e.an,n.hn=e.hn,C("confirmed",{...n}),c.value.close()}return x({open:j}),(s,o)=>(l(),T(N,{to:"body"},[i($,{ref_key:"modal",ref:c,"width-mode":"form-cols-1",onClosed:o[2]||(o[2]=p=>Object.keys(n).map(a=>n[a]=null))},{header:d(()=>[I]),body:d(()=>{var p;return[t("div",M,[i(F,{label:"an",name:"an",modelValue:n.an,"onUpdate:modelValue":o[0]||(o[0]=a=>n.an=a),type:"tel",error:u.an,ref_key:"anInput",ref:h,onKeydown:A(v,["enter"])},null,8,["modelValue","error","onKeydown"]),i(R,{spin:m.value,class:"btn-complement w-full mt-2",onClick:v,disabled:!((p=n.an)!=null&&p.length)},{default:d(()=>[k(" SEARCH ")]),_:1},8,["spin","disabled"]),U,q,e.hn?(l(),r("div",H,[(l(!0),r(w,null,g([...Object.keys(e)].filter(a=>e[a]),a=>(l(),r("p",{class:"mt-1 whitespace-nowrap",key:a},[t("span",L,y(a.replaceAll("_"," "))+" : ",1),k(" "+y(e[a]),1)]))),128))])):(l(),r("div",{key:0,class:B(["bg-white rounded shadow p-2 lg:p-4 text-sm",{"animate-pulse":m.value}])},[(l(!0),r(w,null,g(Object.keys(e),a=>(l(),r("div",{class:"mt-1",key:a},[t("span",z,y(a)+" placeholder ",1)]))),128))],2)),i(E,{name:"slide-fade"},{default:d(()=>[e.hn?(l(),r("div",G,[J,i(D,{label:"reason for admission",modelValue:n.reason_for_admission,"onUpdate:modelValue":o[1]||(o[1]=a=>n.reason_for_admission=a),name:"reason_for_admission",options:b.admitReasons},null,8,["modelValue","options"])])):K("",!0)]),_:1})])]}),footer:d(()=>[t("div",P,[t("button",{class:"btn btn-accent",onClick:O,disabled:!e.an||!n.reason_for_admission}," Confirm ",8,Q)])]),_:1},512)]))}};export{ae as default};
