import{k as V,v as b,r as q,h as s,c as i,b as t,d as r,f as D,g as u,j as v,e as x,m as $,x as I,p as A,F,u as O}from"./app-Dm-rz4P0.js";import{_ as f}from"./FormCheckbox-ffXh_j2w.js";import{_ as m}from"./FormInput-Bl1VXbIN.js";import{_ as p}from"./FormSelect-Dk6vrtT4.js";import{_ as h}from"./FormRadio-DtkhsyD4.js";import j from"./FormSelectOther-CVH9TCwV.js";import{u as B}from"./useSelectOther-D4qWtZtx.js";import{I as E}from"./IconCopy-CQeoRmTJ.js";import"./ModalDialog-BCpnuxHH.js";const G={class:"mt-6 md:mt-12 xl:mt-24 flex justify-between items-center",id:"prescription"},S={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4"},T={key:0,class:"grid gap-2 md:grid-cols-2 md:gap-4 xl:gap-8"},H={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4"},R={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4"},W={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},J={key:0,class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},K={key:1},M={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},Q={key:2,class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},X={key:3,class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},Y={key:4,class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4 my-2 md:my-4 xl:my-8"},Z={class:"grid gap-2 md:gap-4 md:grid-cols-2 xl:gap-8 2xl:grid-cols-4"},pe={__name:"PEForm",props:{modelValue:{type:Object,required:!0},formConfigs:{type:Object,required:!0}},emits:["update:modelValue","autosave","copyPreviousOrder"],setup(k,{emit:w}){const U=k,z=w,l=V({...U.modelValue}),c={anticoagulant:l.anticoagulant??null,access_type:l.access_type??null};b(()=>l,a=>{a.anticoagulant!==c.anticoagulant&&(a.anticoagulant_none_drip_via_peripheral_iv=!1,a.anticoagulant_none_nss_200ml_flush_q_hour=!1,a.heparin_loading_dose=null,a.heparin_maintenance_dose=null,a.enoxaparin_dose=null,a.fondaparinux_bolus_dose=null,a.tinzaparin_dose=null,c.anticoagulant=a.anticoagulant),(a.access_type==="pending"||a.access_type==="Remove"||["DLC","Perm cath"].includes(a.access_type)&&!["DLC","Perm cath"].includes(c.access_type)||["AVF","AVG"].includes(a.access_type)&&!["AVF","AVG"].includes(c.access_type))&&(a.access_site_coagulant="",c.access_type=a.access_type),a.replacement_fluid_albumin||(a.replacement_fluid_albumin_concentrated=null,a.replacement_fluid_albumin_volume=null),a.replacement_fluid_ffp||(a.replacement_fluid_ffp_volume=null),z("update:modelValue",a),z("autosave")},{deep:!0});const n=V({...U.formConfigs});l.anticoagulant&&n.anticoagulants.findIndex(a=>a.value===l.anticoagulant)===-1&&n.anticoagulants.push({value:l.anticoagulant,label:l.anticoagulant});const C=q(null);b(()=>l.anticoagulant,a=>{a.toLowerCase()==="other"&&(d.placeholder="Other anticoagulant",d.configs=n.anticoagulants,d.input=C.value,y.value.open())}),l.catheter_lock&&n.catheter_lock_options.findIndex(a=>a.value===l.catheter_lock)===-1&&n.catheter_lock_options.push({value:l.catheter_lock,label:l.catheter_lock});const P=q(null);b(()=>l.catheter_lock,a=>{a.toLowerCase()==="other"&&(d.placeholder="Other Catheter lock",d.configs=n.catheter_lock_options,d.input=P.value,y.value.open())});const{selectOtherInput:y,selectOther:d,selectOtherClosed:L}=B(),_=V({heparin_loading_dose:null,heparin_maintenance_dose:null,enoxaparin_dose:null,tinzaparin_dose:null}),g=a=>{let e=n.validators[a];const o=e.type==="integer"?parseInt(l[a]):parseFloat(l[a]);o<e.min||o>e.max?(_[a]=`${l[a]} could not be saved. Accept range [${e.min}, ${e.max}].`,l[a]=null):_[a]=""};return(a,e)=>(s(),i(F,null,[t("h2",G,[e[33]||(e[33]=t("span",{class:"form-label !mb-0 text-lg italic text-complement"},"Plasmapheresis Prescription",-1)),k.formConfigs.can.copy?(s(),i("button",{key:0,class:"flex items-center text-sm text-accent",onClick:e[0]||(e[0]=o=>a.$emit("copyPreviousOrder"))},[r(E,{class:"w-3 h-3 mr-1"}),e[32]||(e[32]=D(" Copy previous order "))])):u("",!0)]),e[38]||(e[38]=t("hr",{class:"my-4 border-b border-accent"},null,-1)),t("div",S,[r(p,{label:"technique",modelValue:l.technique,"onUpdate:modelValue":e[1]||(e[1]=o=>l.technique=o),name:"pe.technique",error:a.$page.props.errors["pe.technique"],options:n.pe_technique_options},null,8,["modelValue","error","options"]),r(p,{label:"access type",modelValue:l.access_type,"onUpdate:modelValue":e[2]||(e[2]=o=>l.access_type=o),name:"pe.access_type",error:a.$page.props.errors["pe.access_type"],options:n.access_types},null,8,["modelValue","error","options"]),r(p,{label:"access site",modelValue:l.access_site_coagulant,"onUpdate:modelValue":e[3]||(e[3]=o=>l.access_site_coagulant=o),name:"pe.access_site_coagulant",error:a.$page.props.errors["pe.access_site_coagulant"],options:l.access_type&&l.access_type.startsWith("AV")?n.av_access_sites:n.non_av_access_sites,disabled:!l.access_type||l.access_type==="pending"},null,8,["modelValue","error","options","disabled"]),r(p,{modelValue:l.dialyzer,"onUpdate:modelValue":e[4]||(e[4]=o=>l.dialyzer=o),name:"pe.dialyzer",error:a.$page.props.errors["pe.dialyzer"],label:"dialyzer 1",options:n.pe_dialyzers},null,8,["modelValue","error","options"]),l.technique==="DFPP"?(s(),v(p,{key:0,modelValue:l.dialyzer_second,"onUpdate:modelValue":e[5]||(e[5]=o=>l.dialyzer_second=o),name:"pe.dialyzer_second",error:a.$page.props.errors["pe.dialyzer_second"],label:"dialyzer 2",options:n.pe_dialyzer_second_options},null,8,["modelValue","error","options"])):u("",!0)]),e[39]||(e[39]=t("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1)),e[40]||(e[40]=t("label",{class:"form-label"},"replacement",-1)),r(f,{modelValue:l.replacement_fluid_albumin,"onUpdate:modelValue":e[6]||(e[6]=o=>l.replacement_fluid_albumin=o),name:"pe.replacement_fluid_albumin",label:"Albumin",class:"mt-2 md:mt-4",toggler:!0},null,8,["modelValue"]),r($,{name:"slide-fade"},{default:x(()=>[l.replacement_fluid_albumin?(s(),i("div",T,[t("div",null,[e[34]||(e[34]=t("label",{class:"form-label"},"concentrated (%)",-1)),r(h,{modelValue:l.replacement_fluid_albumin_concentrated,"onUpdate:modelValue":e[7]||(e[7]=o=>l.replacement_fluid_albumin_concentrated=o),name:"pe.replacement_fluid_albumin_concentrated",error:a.$page.props.errors["pe.replacement_fluid_albumin_concentrated"],class:"grid grid-cols-2 gap-2 md:gap-4",options:n.replacement_fluid_albumin_concentrated},null,8,["modelValue","error","options"])]),r(m,{modelValue:l.replacement_fluid_albumin_volume,"onUpdate:modelValue":e[8]||(e[8]=o=>l.replacement_fluid_albumin_volume=o),type:"tel",name:"pe.replacement_fluid_albumin_volume",error:a.$page.props.errors["pe.replacement_fluid_albumin_volume"],label:"volume (ml)"},null,8,["modelValue","error"])])):u("",!0)]),_:1}),r(f,{modelValue:l.replacement_fluid_ffp,"onUpdate:modelValue":e[9]||(e[9]=o=>l.replacement_fluid_ffp=o),name:"pe.replacement_fluid_ffp",label:"FFP",class:"mt-2 md:mt-4",toggler:!0},null,8,["modelValue"]),r($,{name:"slide-fade"},{default:x(()=>[l.replacement_fluid_ffp?(s(),v(m,{key:0,modelValue:l.replacement_fluid_ffp_volume,"onUpdate:modelValue":e[10]||(e[10]=o=>l.replacement_fluid_ffp_volume=o),type:"tel",name:"pe.replacement_fluid_ffp_volume",error:a.$page.props.errors["pe.replacement_fluid_ffp_volume"],label:"volume (ml)"},null,8,["modelValue","error"])):u("",!0)]),_:1}),r(I,{class:"my-2 md:my-4 xl:my-8",title:"Volume of exchange (l)",message:"[1.5-2.0] EPV, EPV = 0.065 x weight (kg) x (1-hct)."}),e[41]||(e[41]=t("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1)),t("div",H,[r(p,{modelValue:l.blood_pump,"onUpdate:modelValue":e[11]||(e[11]=o=>l.blood_pump=o),name:"pe.blood_pump",error:a.$page.props.errors["pe.blood_pump"],label:"blood pump (ml/min)",options:n.blood_pump},null,8,["modelValue","error","options"]),r(p,{modelValue:l.filtration_pump,"onUpdate:modelValue":e[12]||(e[12]=o=>l.filtration_pump=o),name:"pe.filtration_pump",error:a.$page.props.errors["pe.filtration_pump"],label:"filtration pump (%)",options:n.pe_filtration_pump_options},null,8,["modelValue","error","options"]),r(p,{modelValue:l.replacement_pump,"onUpdate:modelValue":e[13]||(e[13]=o=>l.replacement_pump=o),name:"pe.replacement_pump",error:a.$page.props.errors["pe.replacement_pump"],label:"replacement pump (%)",options:n.pe_replacement_pump_options},null,8,["modelValue","error","options"]),l.technique==="DFPP"?(s(),v(p,{key:0,modelValue:l.percent_discard,"onUpdate:modelValue":e[14]||(e[14]=o=>l.percent_discard=o),name:"pe.percent_discard",error:a.$page.props.errors["pe.percent_discard"],label:"% discard",options:n.pe_percent_discard_options},null,8,["modelValue","error","options"])):u("",!0),r(m,{modelValue:l.drain_pump,"onUpdate:modelValue":e[15]||(e[15]=o=>l.drain_pump=o),type:"tel",name:"pe.drain_pump",error:a.$page.props.errors["pe.drain_pump"],label:"drain pump (%)"},null,8,["modelValue","error"])]),e[42]||(e[42]=t("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1)),t("div",R,[t("div",null,[e[35]||(e[35]=t("label",{class:"form-label"},"10% calcium gluconate volume (ml)",-1)),r(h,{modelValue:l.calcium_gluconate_10_percent_volume,"onUpdate:modelValue":e[16]||(e[16]=o=>l.calcium_gluconate_10_percent_volume=o),class:A(["grid gap-2 md:gap-4",{"grid-cols-3":!l.calcium_gluconate_10_percent_volume,"grid-cols-2 sm:grid-cols-4":l.calcium_gluconate_10_percent_volume}]),name:"pe.calcium_gluconate_10_percent_volume",error:a.$page.props.errors["pe.calcium_gluconate_10_percent_volume"],options:n.calcium_gluconate_10_percent_volumes,"allow-reset":!0},null,8,["modelValue","class","error","options"])]),t("div",null,[e[36]||(e[36]=t("label",{class:"form-label"},"10% calcium gluconate timing (at hour)",-1)),r(h,{modelValue:l.calcium_gluconate_10_percent_timing,"onUpdate:modelValue":e[17]||(e[17]=o=>l.calcium_gluconate_10_percent_timing=o),name:"pe.calcium_gluconate_10_percent_timing",error:a.$page.props.errors["pe.calcium_gluconate_10_percent_timing"],options:n.calcium_gluconate_10_percent_timings,"allow-reset":!0,class:A(["grid gap-2 md:gap-4 grid-cols-2",{"grid-cols-3":l.calcium_gluconate_10_percent_timing}])},null,8,["modelValue","error","options","class"])])]),e[43]||(e[43]=t("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1)),t("div",W,[r(p,{modelValue:l.anticoagulant,"onUpdate:modelValue":e[18]||(e[18]=o=>l.anticoagulant=o),name:"pe.anticoagulant",label:"anticoagulant",options:n.anticoagulants,ref_key:"anticoagulantInput",ref:C,error:a.$page.props.errors["pe.anticoagulant"]},null,8,["modelValue","options","error"])]),r($,{name:"slide-fade"},{default:x(()=>[l.anticoagulant==="none"?(s(),i("div",J,[r(f,{label:"anticoagulant drip via peripheral IV",name:"anticoagulant_none_drip_via_peripheral_iv",modelValue:l.anticoagulant_none_drip_via_peripheral_iv,"onUpdate:modelValue":e[19]||(e[19]=o=>l.anticoagulant_none_drip_via_peripheral_iv=o)},null,8,["modelValue"]),r(f,{label:"NSS 200 ml flush q 1 hour",name:"anticoagulant_none_nss_200ml_flush_q_hour",modelValue:l.anticoagulant_none_nss_200ml_flush_q_hour,"onUpdate:modelValue":e[20]||(e[20]=o=>l.anticoagulant_none_nss_200ml_flush_q_hour=o)},null,8,["modelValue"])])):l.anticoagulant==="heparin"?(s(),i("div",K,[t("div",M,[r(m,{label:"loading dose (iu)",name:"pe.heparin_loading_dose",modelValue:l.heparin_loading_dose,"onUpdate:modelValue":e[21]||(e[21]=o=>l.heparin_loading_dose=o),type:"number",pattern:"\\d*",onAutosave:e[22]||(e[22]=o=>g("heparin_loading_dose")),error:_.heparin_loading_dose??a.$page.props.errors["pe.heparin_loading_dose"],placeholder:`[${n.validators.heparin_loading_dose.min}, ${n.validators.heparin_loading_dose.max}] IU`},null,8,["modelValue","error","placeholder"]),r(m,{label:"maintenance dose (iu/hour)",name:"pe.heparin_maintenance_dose",modelValue:l.heparin_maintenance_dose,"onUpdate:modelValue":e[23]||(e[23]=o=>l.heparin_maintenance_dose=o),type:"number",pattern:"\\d*",onAutosave:e[24]||(e[24]=o=>g("heparin_maintenance_dose")),error:_.heparin_maintenance_dose??a.$page.props.errors["pe.heparin_maintenance_dose"],placeholder:`[${n.validators.heparin_maintenance_dose.min}, ${n.validators.heparin_maintenance_dose.max}] IU/Hour`},null,8,["modelValue","error","placeholder"])]),r(I,{title:"Duration of maintenance (hours)",message:"DLC/PC uses duration of dialysis. AVF/AVG uses duration of dialysis - 1."})])):l.anticoagulant==="enoxaparin"?(s(),i("div",Q,[r(m,{label:"dose (ml)",name:"pe.enoxaparin_dose",modelValue:l.enoxaparin_dose,"onUpdate:modelValue":e[25]||(e[25]=o=>l.enoxaparin_dose=o),type:"number",onAutosave:e[26]||(e[26]=o=>g("enoxaparin_dose")),error:_.enoxaparin_dose??a.$page.props.errors["pe.enoxaparin_dose"],placeholder:`[${n.validators.enoxaparin_dose.min}, ${n.validators.enoxaparin_dose.max}] ml`},null,8,["modelValue","error","placeholder"])])):l.anticoagulant==="fondaparinux"?(s(),i("div",X,[r(p,{label:"bolus dose (iu)",name:"pe.fondaparinux_bolus_dose",modelValue:l.fondaparinux_bolus_dose,"onUpdate:modelValue":e[27]||(e[27]=o=>l.fondaparinux_bolus_dose=o),options:n.fondaparinux_bolus_doses,error:a.$page.props.errors["pe.fondaparinux_bolus_dose"]},null,8,["modelValue","options","error"])])):l.anticoagulant==="tinzaparin"?(s(),i("div",Y,[r(m,{label:"dose (iu)",name:"pe.tinzaparin_dose",modelValue:l.tinzaparin_dose,"onUpdate:modelValue":e[28]||(e[28]=o=>l.tinzaparin_dose=o),type:"number",pattern:"\\d*",onAutosave:e[29]||(e[29]=o=>g("tinzaparin_dose")),error:_.tinzaparin_dose??a.$page.props.errors["pe.tinzaparin_dose"],placeholder:`[${n.validators.tinzaparin_dose.min}, ${n.validators.tinzaparin_dose.max}] IU`},null,8,["modelValue","error","placeholder"])])):u("",!0)]),_:1}),l.access_type&&["DLC","Perm cath"].includes(l.access_type)?(s(),i(F,{key:0},[e[37]||(e[37]=t("hr",{class:"border border-dashed my-2 md:my-4 xl:my-8"},null,-1)),t("div",Z,[r(p,{label:"catheter lock",name:"pe.catheter_lock",options:n.catheter_lock_options,modelValue:l.catheter_lock,"onUpdate:modelValue":e[30]||(e[30]=o=>l.catheter_lock=o),error:a.$page.props.errors["pe.catheter_lock"],"allow-other":"",ref_key:"catheterLockInput",ref:P},null,8,["options","modelValue","error"])])],64)):u("",!0),r(j,{placeholder:O(d).placeholder,ref_key:"selectOtherInput",ref:y,onClosed:e[31]||(e[31]=o=>O(L)(o,!0))},null,8,["placeholder"])],64))}};export{pe as default};
