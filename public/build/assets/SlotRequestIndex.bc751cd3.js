import{E as w,o as n,c as a,a as t,F as l,v as c,b as d,t as i,q as f,w as k,K as g,i as q,g as _,M as o}from"./app.11879616.js";import{_ as b,I as C,a as j}from"./ActionDropdown.04866dde.js";import{I as M}from"./IconUserMd.6de68e1d.js";import{_ as D}from"./PaginationNav.a88a191c.js";const E={class:"bg-white rounded shadow overflow-x-auto hidden md:block"},H={class:"w-full whitespace-nowrap"},L={class:"text-left font-semibold text-complement"},N=["textContent","colspan"],R=["textContent"],T={class:"border-t"},A={key:1,class:"p-2 flex justify-center items-center"},B=["innerHTML"],F={class:"md:hidden"},I={class:"flex justify-between items-center my-2 px-2"},S={class:"bg-primary-darker p-2 rounded-full"},O={class:"my-2 p-2 bg-gray-100 rounded space-y-2"},V={class:"flex justify-between items-center"},$=["innerHTML"],K={class:"font-semibold text-complement text-xs flex items-center"},P={class:"block italic truncate"},U={class:"flex justify-center items-center"},z={class:"italic text-center w-full"},Y={__name:"SlotRequestIndex",props:{requests:{type:Object,required:!0},configs:{type:Object,required:!0},endpoints:{type:Object,required:!0}},setup(u){const h=s=>{o().props.value.event.name="confirmation-required",o().props.value.event.payload=s,o().props.value.event.fire=+new Date},p=s=>{s.callback==="approve-request"?_({approve:!0}).patch(s.href):s.callback==="disapprove-request"?(r={...s},h({heading:s.confirm_heading,confirmText:s.confirm_text,confirmedEvent:v,requireReason:!0})):s.callback==="cancel-request"&&(r={...s},h({heading:s.confirm_heading,confirmText:s.confirm_text,confirmedEvent:y,requireReason:!0}))},v="disapprove-acute-hemodialysis-slot-request",y="cancel-acute-hemodialysis-slot-request";let r;return w(()=>o().props.value.event.fire,s=>{!s||(o().props.value.event.name===v?_({approve:!1,reason:o().props.value.event.payload}).patch(r.href,{preserveState:!1,onFinish:()=>r=null}):o().props.value.event.name===y&&_({reason:o().props.value.event.payload}).delete(r.href,{preserveState:!1,onFinish:()=>r=null}))}),(s,G)=>(n(),a("div",null,[t("div",E,[t("table",H,[t("tr",L,[(n(),a(l,null,c(["HN","Name","Request","By"],e=>t("th",{class:"px-6 pt-6 pb-4",key:e,textContent:i(e),colspan:e==="MD"?2:1},null,8,N)),64))]),(n(!0),a(l,null,c(u.requests.data,(e,m)=>(n(),a("tr",{class:"focus-within:bg-primary-darker",key:m},[(n(),a(l,null,c(["hn","patient_name","request","requester"],x=>t("td",{class:"px-6 py4 border-t",key:x,textContent:i(e[x])},null,8,R)),64)),t("td",T,[e.actions.length?(n(),f(b,{key:0,actions:e.actions,onActionClicked:p},null,8,["actions"])):(n(),a("div",A,[t("span",{innerHTML:e.status},null,8,B)]))])]))),128))])]),t("div",F,[(n(!0),a(l,null,c(u.requests.data,(e,m)=>(n(),a("div",{class:"bg-white rounded shadow my-4 p-4",key:m},[t("div",I,[t("div",null," HN: "+i(e.hn)+" "+i(e.patient_name),1),e.actions.length>1?(n(),f(g,{key:0},{default:k(()=>[t("div",S,[d(C,{class:"w-4 h-4 text-accent"})])]),dropdown:k(()=>[d(j,{actions:e.actions,onActionClicked:p},null,8,["actions"])]),_:2},1024)):e.actions.length===1?(n(),f(b,{key:1,actions:e.actions,onActionClicked:p},null,8,["actions"])):q("",!0)]),t("div",O,[t("div",V,[t("span",{innerHTML:e.status},null,8,$),t("p",K,[d(M,{class:"h-3 w-3 mr-1"}),t("span",P,i(e.requester),1)])]),t("div",U,[t("p",z,i(e.request),1)])])]))),128))]),d(D,{links:u.requests.links},null,8,["links"])]))}};export{Y as default};
